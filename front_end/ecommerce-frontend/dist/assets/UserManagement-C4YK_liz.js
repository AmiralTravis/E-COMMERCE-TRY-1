import{Q as j,g as f,_ as D,e as p,f as V,h as F,c as o,a as e,i as v,d as U,v as b,j as A,k as $,p as S,F as B,q as L,o as n,t as h,l as i}from"./index-Clrnze2-.js";const N=j("userManagement",{state:()=>({users:[]}),actions:{async fetchUsers(){const r=await f.get("/admin/users");this.users=r.data},async approveSeller(r){await f.patch(`/admin/users/${r}/approve`),await this.fetchUsers()},async rejectSeller(r){await f.delete(`/admin/users/${r}/reject`),await this.fetchUsers()},async deleteUser(r){await f.delete(`/admin/users/${r}`),await this.fetchUsers()}}}),R={class:"user-management"},E={class:"filters-container"},q={class:"filters"},O={class:"filter-group"},P={class:"filter-group"},Q={class:"filter-group"},T={class:"filter-group"},I={class:"filter-group"},W={class:"table-container"},z={class:"users-table"},G={class:"username"},H={class:"email"},J={class:"role"},K={class:"role-badge"},X={class:"created-at"},Y={class:"actions"},Z={class:"action-buttons"},ee=["onClick"],te=["onClick"],se=["onClick"],le={key:0,class:"no-results"},ae={__name:"UserManagement",setup(r){const c=N(),_=p(!0),y=p(!0),g=p(!0),m=p(""),u=p("username");V(async()=>{await c.fetchUsers()});const w=F(()=>{let l=c.users||[];if(l=l.filter(a=>!!(_.value&&a.role==="user"||y.value&&a.role==="seller"||g.value&&a.role==="pending_seller")),m.value){const a=m.value.toLowerCase();l=l.filter(d=>d.username.toLowerCase().includes(a)||d.email.toLowerCase().includes(a))}const[t,s]=u.value.startsWith("-")?[u.value.slice(1),"desc"]:[u.value,"asc"];return l.sort((a,d)=>s==="asc"?a[t]>d[t]?1:-1:a[t]<d[t]?1:-1)});function k(l){return new Date(l).toLocaleDateString()}async function x(l){try{await c.approveSeller(l),i.success("Seller approved successfully")}catch{i.error("Failed to approve seller")}}async function C(l){try{await c.rejectSeller(l),i.success("Seller rejected successfully")}catch{i.error("Failed to reject seller")}}async function M(l){try{await c.deleteUser(l),i.success("User deleted successfully")}catch{i.error("Failed to delete user")}}return(l,t)=>(n(),o("div",R,[t[12]||(t[12]=e("div",{class:"dashboard-header"},[e("h1",{class:"text-center text-2xl font-bold text-gray-800"},"User Management")],-1)),e("div",E,[e("div",q,[e("div",O,[e("label",null,[v(e("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>_.value=s)},null,512),[[b,_.value]]),t[5]||(t[5]=U(" Show Users "))])]),e("div",P,[e("label",null,[v(e("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=s=>y.value=s)},null,512),[[b,y.value]]),t[6]||(t[6]=U(" Show Sellers "))])]),e("div",Q,[e("label",null,[v(e("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=s=>g.value=s)},null,512),[[b,g.value]]),t[7]||(t[7]=U(" Show Pending Sellers "))])]),e("div",T,[t[8]||(t[8]=e("label",null,"Search:",-1)),v(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>m.value=s),placeholder:"Search by Username or Email",class:"search-input"},null,512),[[A,m.value]])]),e("div",I,[t[10]||(t[10]=e("label",null,"Sort By:",-1)),v(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>u.value=s),class:"sort-select"},t[9]||(t[9]=[e("option",{value:"username"},"Username (Asc)",-1),e("option",{value:"-username"},"Username (Desc)",-1),e("option",{value:"createdAt"},"Registration Date (Oldest First)",-1),e("option",{value:"-createdAt"},"Registration Date (Newest First)",-1)]),512),[[$,u.value]])])])]),e("div",W,[e("table",z,[t[11]||(t[11]=e("thead",null,[e("tr",null,[e("th",{class:"username"},"Username"),e("th",{class:"email"},"Email"),e("th",{class:"role"},"Role"),e("th",{class:"created-at"},"Registered On"),e("th",{class:"actions"},"Actions")])],-1)),e("tbody",null,[(n(!0),o(B,null,L(w.value,s=>(n(),o("tr",{key:s.id},[e("td",G,h(s.username),1),e("td",H,h(s.email),1),e("td",J,[e("span",K,h(s.role),1)]),e("td",X,h(k(s.createdAt)),1),e("td",Y,[e("div",Z,[s.role==="pending_seller"?(n(),o("button",{key:0,onClick:a=>x(s.id),class:"action-button approve"}," Approve ",8,ee)):S("",!0),s.role==="pending_seller"?(n(),o("button",{key:1,onClick:a=>C(s.id),class:"action-button reject"}," Reject ",8,te)):S("",!0),e("button",{onClick:a=>M(s.id),class:"action-button delete"}," Delete ",8,se)])])]))),128))])]),w.value.length===0?(n(),o("div",le," No users found matching your criteria. ")):S("",!0)])]))}},oe=D(ae,[["__scopeId","data-v-b637e459"]]);export{oe as default};
