import{C as M,o as g,D as ne,r as F,b as L,w as ie,F as ee,q as se,E as Re,i as k,G as at,H as lt,p as E,y as ht,_ as dt,I as Jt,c as b,a as h,J as Gt,t as S,j as U,K as ke,k as fe,n as G,u as Qt,e as C,h as ve,f as Kt,g as _}from"./index-Clrnze2-.js";function Je(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,o)}return i}function z(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Je(Object(i),!0).forEach(function(o){O(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Je(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function O(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _t(e,t){if(e==null)return{};var i,o,n=function(l,a){if(l==null)return{};var r,d,u={},c=Object.keys(l);for(d=0;d<c.length;d++)r=c[d],a.indexOf(r)>=0||(u[r]=l[r]);return u}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)i=s[o],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function oe(e){return function(t){if(Array.isArray(t))return Pe(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,i){if(t){if(typeof t=="string")return Pe(t,i);var o=Object.prototype.toString.call(t).slice(8,-1);if(o==="Object"&&t.constructor&&(o=t.constructor.name),o==="Map"||o==="Set")return Array.from(t);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Pe(t,i)}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Pe(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}var Ge,ei,be,P=(Ge=function(e){/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var t={}.hasOwnProperty;function i(){for(var o=[],n=0;n<arguments.length;n++){var s=arguments[n];if(s){var l=typeof s;if(l==="string"||l==="number")o.push(s);else if(Array.isArray(s)){if(s.length){var a=i.apply(null,s);a&&o.push(a)}}else if(l==="object")if(s.toString===Object.prototype.toString)for(var r in s)t.call(s,r)&&s[r]&&o.push(r);else o.push(s.toString())}}return o.join(" ")}e.exports?(i.default=i,e.exports=i):window.classNames=i})()},Ge(be={path:ei,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(t==null&&be.path)}},be.exports),be.exports),X=function(e){return function(t,i){if(!t)return e;var o;typeof t=="string"?o=t:i=t;var n=e;return o&&(n+="__"+o),n+(i?Object.keys(i).reduce(function(s,l){var a=i[l];return a&&(s+=" "+(typeof a=="boolean"?n+"--"+l:n+"--"+l+"_"+a)),s},""):"")}};function $e(e,t,i){var o,n,s,l,a;function r(){var u=Date.now()-l;u<t&&u>=0?o=setTimeout(r,t-u):(o=null,i||(a=e.apply(s,n),s=n=null))}t==null&&(t=100);var d=function(){s=this,n=arguments,l=Date.now();var u=i&&!o;return o||(o=setTimeout(r,t)),u&&(a=e.apply(s,n),s=n=null),a};return d.clear=function(){o&&(clearTimeout(o),o=null)},d.flush=function(){o&&(a=e.apply(s,n),s=n=null,clearTimeout(o),o=null)},d}$e.debounce=$e;var je=$e,v=function(){return v=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},v.apply(this,arguments)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function ut(e,t){var i,o;return e&&t?(i=""+e+t[0].toUpperCase()+t.slice(1),o=e+"-"+t):(i=e||t,o=e||t),{name:i,classname:o}}function ct(e){return/^blob:/.test(e)}function Qe(e){return ct(e)||function(t){return/^data:/.test(t)}(e)}function ae(e){return!!(e&&e.constructor&&e.call&&e.apply)}function I(e){return e===void 0}function xe(e){return typeof e=="object"&&e!==null}function Oe(e,t,i){var o={};return xe(e)?(Object.keys(t).forEach(function(n){I(e[n])?o[n]=t[n]:xe(t[n])?xe(e[n])?o[n]=Oe(e[n],t[n],i[n]):o[n]=e[n]?t[n]:i[n]:t[n]===!0||t[n]===!1?o[n]=!!e[n]:o[n]=e[n]}),o):e?t:i}function we(e){var t=Number(e);return Number.isNaN(t)?e:t}function Ke(e){return typeof(e=="number"||function(t){return typeof t=="object"&&t!==null}(e)&&toString.call(e)=="[object Number]")&&!mt(e)}function mt(e){return e!=e}function gt(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}var me=function(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.type="manipulateImage",this.move=e,this.scale=t},ti=function(e,t){t===void 0&&(t={}),this.type="resize",this.directions=e,this.params=t},Ue=function(e){this.type="move",this.directions=e},ii=function(){function e(t,i,o,n,s){this.type="drag",this.nativeEvent=t,this.position=o,this.previousPosition=n,this.element=i,this.anchor=s}return e.prototype.shift=function(){var t=this,i=t.element,o=t.anchor,n=t.position;if(i){var s=i.getBoundingClientRect(),l=s.left,a=s.top;return{left:n.left-l-o.left,top:n.top-a-o.top}}return{left:0,top:0}},e}(),Fe={name:"DraggableElement",props:{classname:{type:String}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){if(!this.$refs.draggable)throw new Error('You should add ref "draggable" to your root element to use draggable mixin');this.touches=[],this.hovered=!1},methods:{onMouseOver:function(){this.hovered||(this.hovered=!0,this.$emit("enter"))},onMouseLeave:function(){this.hovered&&!this.touches.length&&(this.hovered=!1,this.$emit("leave"))},onTouchStart:function(e){e.cancelable&&!this.disabled&&e.touches.length===1&&(this.touches=oe(e.touches),this.hovered||(this.$emit("enter"),this.hovered=!0),e.touches.length&&this.initAnchor(this.touches.reduce(function(t,i){return{clientX:t.clientX+i.clientX/e.touches.length,clientY:t.clientY+i.clientY/e.touches.length}},{clientX:0,clientY:0})),e.preventDefault&&e.preventDefault(),e.stopPropagation())},onTouchEnd:function(){this.processEnd()},onTouchMove:function(e){this.touches.length&&(this.processMove(e,e.touches),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation())},onMouseDown:function(e){if(!this.disabled){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.preventDefault())},onMouseUp:function(){this.processEnd()},initAnchor:function(e){var t=this.$refs.draggable.getBoundingClientRect(),i=t.left,o=t.right,n=t.bottom,s=t.top;this.anchor={left:e.clientX-i,top:e.clientY-s,bottom:n-e.clientY,right:o-e.clientX}},processMove:function(e,t){var i=oe(t);if(this.touches.length){if(this.touches.length===1&&i.length===1){var o=this.$refs.draggable;this.$emit("drag",new ii(e,o,{left:i[0].clientX,top:i[0].clientY},{left:this.touches[0].clientX,top:this.touches[0].clientY},this.anchor))}this.touches=i}},processEnd:function(){this.touches.length&&this.$emit("drag-end"),this.hovered&&(this.$emit("leave"),this.hovered=!1),this.touches=[]}},emits:["drag","drag-end","leave","enter"]};Fe.render=function(e,t,i,o,n,s){return g(),M("div",{ref:"draggable",class:i.classname,onTouchstart:t[1]||(t[1]=function(){return s.onTouchStart&&s.onTouchStart.apply(s,arguments)}),onMousedown:t[2]||(t[2]=function(){return s.onMouseDown&&s.onMouseDown.apply(s,arguments)}),onMouseover:t[3]||(t[3]=function(){return s.onMouseOver&&s.onMouseOver.apply(s,arguments)}),onMouseleave:t[4]||(t[4]=function(){return s.onMouseLeave&&s.onMouseLeave.apply(s,arguments)})},[ne(e.$slots,"default")],34)};var Te=X("vue-handler-wrapper"),pt={name:"HandlerWrapper",components:{DraggableElement:Fe},props:{horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},computed:{classes:function(){var e;if(this.horizontalPosition||this.verticalPosition){var t,i=ut(this.horizontalPosition,this.verticalPosition);e=Te((O(t={},i.classname,!0),O(t,"disabled",this.disabled),t))}else e=Te({disabled:this.disabled});return{root:e,draggable:Te("draggable")}}},emits:["leave","enter","drag","drag-end"]};pt.render=function(e,t,i,o,n,s){var l=F("DraggableElement");return g(),M("div",{class:s.classes.root},[L(l,{class:s.classes.draggable,onDrag:t[1]||(t[1]=function(a){return e.$emit("drag",a)}),onDragEnd:t[2]||(t[2]=function(a){return e.$emit("drag-end")}),onLeave:t[3]||(t[3]=function(a){return e.$emit("leave")}),onEnter:t[4]||(t[4]=function(a){return e.$emit("enter")})},{default:ie(function(){return[ne(e.$slots,"default")]}),_:3},8,["class"])],2)};var si=X("vue-line-wrapper"),ft={name:"LineWrapper",components:{DraggableElement:Fe},props:{position:{type:String,required:!0},disabled:{type:Boolean,default:!1}},computed:{classname:function(){var e;return si((O(e={},this.position,!0),O(e,"disabled",this.disabled),e))}},emits:["leave","enter","drag","drag-end"]};ft.render=function(e,t,i,o,n,s){var l=F("DraggableElement");return g(),M(l,{class:s.classname,onDrag:t[1]||(t[1]=function(a){return e.$emit("drag",a)}),onDragEnd:t[2]||(t[2]=function(a){return e.$emit("drag-end")}),onLeave:t[3]||(t[3]=function(a){return e.$emit("leave")}),onEnter:t[4]||(t[4]=function(a){return e.$emit("enter")})},{default:ie(function(){return[ne(e.$slots,"default")]}),_:3},8,["class"])};var q=["left","right","top","bottom"],oi=["left","right"],ni=["top","bottom"],ri=["left","top"],ai=["fill-area","fit-area","stencil","none"],_e={left:0,top:0,width:0,height:0};function et(e,t,i){return!(i=i||["width","height","left","top"]).some(function(o){return e[o]!==t[o]})}function J(e){return{left:e.left,top:e.top,right:e.left+e.width,bottom:e.top+e.height}}function le(e,t){return{left:e.left-t.left,top:e.top-t.top}}function D(e){return{left:e.left+e.width/2,top:e.top+e.height/2}}function ge(e,t){var i={left:0,top:0,right:0,bottom:0};return q.forEach(function(o){var n=t[o],s=J(e)[o];i[o]=n!==void 0&&s!==void 0?o==="left"||o==="top"?Math.max(0,n-s):Math.max(0,s-n):0}),i}function Z(e,t){return{left:e.left-t.left,top:e.top-t.top,width:e.width+t.left+t.right,height:e.height+t.top+t.bottom}}function Ce(e){return{left:-e.left,top:-e.top}}function j(e,t){return v(v({},e),{left:e.left+t.left,top:e.top+t.top})}function H(e,t,i,o){if(t!==1){if(i){var n=D(e);return{width:e.width*t,height:e.height*t,left:e.left+e.width*(1-t)/2+(i.left-n.left)*(1-t),top:e.top+e.height*(1-t)/2+(i.top-n.top)*(1-t)}}return{width:e.width*t,height:e.height*t,left:e.left+e.width*(1-t)/2,top:e.top+e.height*(1-t)/2}}return e}function x(e){return e.width/e.height}function he(e,t){return Math.min(t.right!==void 0&&t.left!==void 0?(t.right-t.left)/e.width:1/0,t.bottom!==void 0&&t.top!==void 0?(t.bottom-t.top)/e.height:1/0)}function de(e,t){var i={left:0,top:0},o=ge(e,t);return o.left&&o.left>0?i.left=o.left:o.right&&o.right>0&&(i.left=-o.right),o.top&&o.top>0?i.top=o.top:o.bottom&&o.bottom>0&&(i.top=-o.bottom),i}function Ie(e,t){var i;return t.minimum&&e<t.minimum?i=t.minimum:t.maximum&&e>t.maximum&&(i=t.maximum),i}function vt(e,t){var i=x(e),o=x(t);return t.width<1/0&&t.height<1/0?i>o?{width:t.width,height:t.width/i}:{width:t.height*i,height:t.height}:t.width<1/0?{width:t.width,height:t.width/i}:t.height<1/0?{width:t.height*i,height:t.height}:e}function bt(e,t){var i=t*Math.PI/180;return{width:Math.abs(e.width*Math.cos(i))+Math.abs(e.height*Math.sin(i)),height:Math.abs(e.width*Math.sin(i))+Math.abs(e.height*Math.cos(i))}}function te(e,t){var i=t*Math.PI/180;return{left:e.left*Math.cos(i)-e.top*Math.sin(i),top:e.left*Math.sin(i)+e.top*Math.cos(i)}}function Me(e,t){var i=ge(W(e,t),t);return i.left+i.right+i.top+i.bottom?i.left+i.right>i.top+i.bottom?Math.min((e.width+i.left+i.right)/e.width,he(e,t)):Math.min((e.height+i.top+i.bottom)/e.height,he(e,t)):1}function W(e,t,i){i===void 0&&(i=!1);var o=de(e,t);return j(e,i?Ce(o):o)}function He(e){return{width:e.right!==void 0&&e.left!==void 0?e.right-e.left:1/0,height:e.bottom!==void 0&&e.top!==void 0?e.bottom-e.top:1/0}}function li(e,t){return v(v({},e),{minWidth:Math.min(t.width,e.minWidth),minHeight:Math.min(t.height,e.minHeight),maxWidth:Math.min(t.width,e.maxWidth),maxHeight:Math.min(t.height,e.maxHeight)})}function wt(e,t,i){i===void 0&&(i=!0);var o={};return q.forEach(function(n){var s=e[n],l=t[n];s!==void 0&&l!==void 0?o[n]=n==="left"||n==="top"?i?Math.max(s,l):Math.min(s,l):i?Math.min(s,l):Math.max(s,l):l!==void 0?o[n]=l:s!==void 0&&(o[n]=s)}),o}function Se(e,t){return wt(e,t,!0)}function tt(e){var t=e.size,i=e.aspectRatio,o=e.ignoreMinimum,n=e.sizeRestrictions;return!!((t.correctRatio||x(t)>=i.minimum&&x(t)<=i.maximum)&&t.height<=n.maxHeight&&t.width<=n.maxWidth&&t.width&&t.height&&(o||t.height>=n.minHeight&&t.width>=n.minWidth))}function it(e,t){return Math.pow(e.width-t.width,2)+Math.pow(e.height-t.height,2)}function K(e){var t=e.width,i=e.height,o=e.sizeRestrictions,n={minimum:e.aspectRatio&&e.aspectRatio.minimum||0,maximum:e.aspectRatio&&e.aspectRatio.maximum||1/0},s={width:Math.max(o.minWidth,Math.min(o.maxWidth,t)),height:Math.max(o.minHeight,Math.min(o.maxHeight,i))};function l(d,u){return u===void 0&&(u=!1),d.reduce(function(c,m){return tt({size:m,aspectRatio:n,sizeRestrictions:o,ignoreMinimum:u})&&(!c||it(m,{width:t,height:i})<it(c,{width:t,height:i}))?m:c},null)}var a=[];n&&[n.minimum,n.maximum].forEach(function(d){d&&a.push({width:s.width,height:s.width/d,correctRatio:!0},{width:s.height*d,height:s.height,correctRatio:!0})}),tt({size:s,aspectRatio:n,sizeRestrictions:o})&&a.push(s);var r=l(a)||l(a,!0);return r&&{width:r.width,height:r.height}}function Be(e){var t=e.event,i=e.coordinates,o=e.positionRestrictions,n=o===void 0?{}:o,s=j(i,t.directions);return j(s,de(s,n))}function hi(e){var t=e.coordinates,i=e.transform,o=e.imageSize,n=e.sizeRestrictions,s=e.positionRestrictions,l=e.aspectRatio,a=e.visibleArea,r=function(u,c){return Be({coordinates:u,positionRestrictions:s,event:new Ue({left:c.left-u.left,top:c.top-u.top})})},d=v({},t);return(Array.isArray(i)?i:[i]).forEach(function(u){var c={};I((c=typeof u=="function"?u({coordinates:d,imageSize:o,visibleArea:a}):u).width)&&I(c.height)||(d=function(m,p){var y=v(v(v({},m),K({width:p.width,height:p.height,sizeRestrictions:n,aspectRatio:l})),{left:0,top:0});return r(y,{left:m.left,top:m.top})}(d,v(v({},d),c))),I(c.left)&&I(c.top)||(d=r(d,v(v({},d),c)))}),d}function di(e){e.event;var t=e.getAreaRestrictions,i=e.boundaries,o=e.coordinates,n=e.visibleArea;e.aspectRatio;var s=e.stencilSize,l=e.sizeRestrictions,a=e.positionRestrictions;e.stencilReference;var r,d,u,c=v({},o),m=v({},n),p=v({},s);r=x(p),d=x(c),u===void 0&&(u=.001),(r===0||d===0?Math.abs(d-r)<u:Math.abs(d/r)<1+u&&Math.abs(d/r)>1-u)||(c=v(v({},c),K({sizeRestrictions:l,width:c.width,height:c.height,aspectRatio:{minimum:x(p),maximum:x(p)}})));var y=Me(m=H(m,c.width*i.width/(m.width*p.width)),t({visibleArea:m,type:"resize"}));return y!==1&&(m=H(m,y),c=H(c,y)),m=W(m=j(m,le(D(c),D(m))),t({visibleArea:m,type:"move"})),{coordinates:c=W(c,Se(J(m),a)),visibleArea:m}}function ui(e){var t=e.event,i=e.getAreaRestrictions,o=e.boundaries,n=e.coordinates,s=e.visibleArea;e.aspectRatio,e.stencilSize,e.sizeRestrictions;var l=e.positionRestrictions;e.stencilReference;var a=v({},n),r=v({},s);if(n&&s&&t.type!=="manipulateImage"){var d={width:0,height:0};r.width,o.width,x(o)>x(a)?(d.height=.8*o.height,d.width=d.height*x(a)):(d.width=.8*o.width,d.height=d.width*x(a));var u=Me(r=H(r,a.width*o.width/(r.width*d.width)),i({visibleArea:r,type:"resize"}));r=H(r,u),u!==1&&(d.height/=u,d.width/=u),r=W(r=j(r,le(D(a),D(r))),i({visibleArea:r,type:"move"})),a=W(a,Se(J(r),l))}return{coordinates:a,visibleArea:r}}function ci(e){var t=e.event,i=e.coordinates,o=e.visibleArea,n=e.getAreaRestrictions,s=v({},o),l=v({},i);if(t.type==="setCoordinates"){var a=Math.max(0,l.width-s.width),r=Math.max(0,l.height-s.height);a>r?s=H(s,Math.min(l.width/s.width,he(s,n({visibleArea:s,type:"resize"})))):r>a&&(s=H(s,Math.min(l.height/s.height,he(s,n({visibleArea:s,type:"resize"}))))),s=W(s=j(s,Ce(de(l,J(s)))),n({visibleArea:s,type:"move"}))}return{visibleArea:s,coordinates:l}}function mi(e){var t=e.imageSize,i=e.visibleArea,o=e.coordinates,n=i||t;return{left:(i?i.left:0)+n.width/2-o.width/2,top:(i?i.top:0)+n.height/2-o.height/2}}function gi(e){var t=e.imageSize,i=e.visibleArea,o=e.aspectRatio,n=e.sizeRestrictions,s=i||t,l=Math.min(o.maximum||1/0,Math.max(o.minimum||0,x(s))),a=s.width<s.height?{width:.8*s.width,height:.8*s.width/l}:{height:.8*s.height,width:.8*s.height*l};return K(v(v({},a),{aspectRatio:o,sizeRestrictions:n}))}function pi(e){var t,i,o=e.imageSize,n=e.visibleArea,s=e.boundaries,l=e.aspectRatio,a=e.sizeRestrictions,r=e.stencilSize,d=n||o;return x(d)>x(s)?i=(t=r.height*d.height/s.height)*x(r):t=(i=r.width*d.width/s.width)/x(r),K({width:i,height:t,aspectRatio:l,sizeRestrictions:a})}function fi(e){var t=e.getAreaRestrictions,i=e.coordinates,o=e.imageSize,n=x(e.boundaries);if(i){var s={height:Math.max(i.height,o.height),width:Math.max(i.width,o.width)},l=vt({width:x(s)>n?s.width:s.height*n,height:x(s)>n?s.width/n:s.height},He(t())),a={left:i.left+i.width/2-l.width/2,top:i.top+i.height/2-l.height/2,width:l.width,height:l.height},r=ge(i,J(v({left:0,top:0},o))),d={};return!r.left&&!r.right&&a.width<=o.width&&(d.left=0,d.right=o.width),!r.top&&!r.bottom&&a.height<=o.height&&(d.top=0,d.bottom=o.height),W(a,d)}var u=x(o);return l={height:u>n?o.height:o.width/n,width:u>n?o.height*n:o.width},{left:o.width/2-l.width/2,top:o.height/2-l.height/2,width:l.width,height:l.height}}function ye(e,t){return wt(e,J(t))}function vi(e){var t=e.event,i=e.coordinates,o=e.visibleArea,n=e.sizeRestrictions,s=e.getAreaRestrictions,l=e.positionRestrictions,a=e.adjustStencil,r=t.scale,d=t.move,u=v({},o),c=v({},i),m=1,p=1,y=r.factor&&Math.abs(r.factor-1)>.001;u=j(u,{left:d.left||0,top:d.top||0});var A={stencil:{minimum:Math.max(n.minWidth?n.minWidth/c.width:0,n.minHeight?n.minHeight/c.height:0),maximum:Math.min(n.maxWidth?n.maxWidth/c.width:1/0,n.maxHeight?n.maxHeight/c.height:1/0,he(c,l))},area:{maximum:he(u,s({visibleArea:u,type:"resize"}))}};r.factor&&y&&(r.factor<1?(p=Math.max(r.factor,A.stencil.minimum))>1&&(p=1):r.factor>1&&(p=Math.min(r.factor,Math.min(A.area.maximum,A.stencil.maximum)))<1&&(p=1)),p&&(u=H(u,p,r.center));var $=i.left-o.left,B=o.width+o.left-(i.width+i.left),Y=i.top-o.top,V=o.height+o.top-(i.height+i.top);return u=W(u=j(u,de(u,{left:l.left!==void 0?l.left-$*p:void 0,top:l.top!==void 0?l.top-Y*p:void 0,bottom:l.bottom!==void 0?l.bottom+V*p:void 0,right:l.right!==void 0?l.right+B*p:void 0})),s({visibleArea:u,type:"move"})),c.width=c.width*p,c.height=c.height*p,c.left=u.left+$*p,c.top=u.top+Y*p,c=W(c,Se(J(u),l)),r.factor&&y&&a&&(r.factor>1?m=Math.min(A.area.maximum,r.factor)/p:r.factor<1&&(m=Math.max(c.height/u.height,c.width/u.width,r.factor/p)),m!==1&&(u=j(u=W(u=H(u,m,r.factor>1?r.center:D(c)),s({visibleArea:u,type:"move"})),Ce(de(c,J(u)))))),{coordinates:c,visibleArea:u}}function bi(e){var t=e.aspectRatio,i=e.getAreaRestrictions,o=e.coordinates,n=e.visibleArea,s=e.sizeRestrictions,l=e.positionRestrictions,a=e.imageSize,r=e.previousImageSize,d=e.angle,u=v({},o),c=v({},n),m=te(D(v({left:0,top:0},r)),d);return(u=v(v({},K({sizeRestrictions:s,aspectRatio:t,width:u.width,height:u.height})),te(D(u),d))).left-=m.left-a.width/2+u.width/2,u.top-=m.top-a.height/2+u.height/2,c=H(c,Me(c,i({visibleArea:c,type:"resize"}))),{coordinates:u=W(u,l),visibleArea:c=W(c=j(c,le(D(u),D(o))),i({visibleArea:c,type:"move"}))}}function wi(e){var t=e.flip,i=e.previousFlip,o=e.rotate,n=e.getAreaRestrictions,s=e.coordinates,l=e.visibleArea,a=e.imageSize,r=v({},s),d=v({},l),u=i.horizontal!==t.horizontal,c=i.vertical!==t.vertical;if(u||c){var m=te({left:a.width/2,top:a.height/2},-o),p=te(D(r),-o),y=te({left:u?m.left-(p.left-m.left):p.left,top:c?m.top-(p.top-m.top):p.top},o);r=j(r,le(y,D(r))),p=te(D(d),-o),d=W(d=j(d,le(y=te({left:u?m.left-(p.left-m.left):p.left,top:c?m.top-(p.top-m.top):p.top},o),D(d))),n({visibleArea:d,type:"move"}))}return{coordinates:r,visibleArea:d}}function st(e){var t=e.directions,i=e.coordinates,o=e.positionRestrictions,n=o===void 0?{}:o,s=e.sizeRestrictions,l=e.preserveRatio,a=e.compensate,r=v({},t),d=Z(i,r).width,u=Z(i,r).height;d<0&&(r.left<0&&r.right<0?(r.left=-(i.width-s.minWidth)/(r.left/r.right),r.right=-(i.width-s.minWidth)/(r.right/r.left)):r.left<0?r.left=-(i.width-s.minWidth):r.right<0&&(r.right=-(i.width-s.minWidth))),u<0&&(r.top<0&&r.bottom<0?(r.top=-(i.height-s.minHeight)/(r.top/r.bottom),r.bottom=-(i.height-s.minHeight)/(r.bottom/r.top)):r.top<0?r.top=-(i.height-s.minHeight):r.bottom<0&&(r.bottom=-(i.height-s.minHeight)));var c=ge(Z(i,r),n);a&&(c.left&&c.left>0&&c.right===0?(r.right+=c.left,r.left-=c.left):c.right&&c.right>0&&c.left===0&&(r.left+=c.right,r.right-=c.right),c.top&&c.top>0&&c.bottom===0?(r.bottom+=c.top,r.top-=c.top):c.bottom&&c.bottom>0&&c.top===0&&(r.top+=c.bottom,r.bottom-=c.bottom),c=ge(Z(i,r),n));var m={width:1/0,height:1/0,left:1/0,right:1/0,top:1/0,bottom:1/0};if(q.forEach(function(A){var $=c[A];$&&r[A]&&(m[A]=Math.max(0,1-$/r[A]))}),l){var p=Math.min.apply(null,q.map(function(A){return m[A]}));p!==1/0&&q.forEach(function(A){r[A]*=p})}else q.forEach(function(A){m[A]!==1/0&&(r[A]*=m[A])});if(d=Z(i,r).width,u=Z(i,r).height,r.right+r.left&&(d>s.maxWidth?m.width=(s.maxWidth-i.width)/(r.right+r.left):d<s.minWidth&&(m.width=(s.minWidth-i.width)/(r.right+r.left))),r.bottom+r.top&&(u>s.maxHeight?m.height=(s.maxHeight-i.height)/(r.bottom+r.top):u<s.minHeight&&(m.height=(s.minHeight-i.height)/(r.bottom+r.top))),l){var y=Math.min(m.width,m.height);y!==1/0&&q.forEach(function(A){r[A]*=y})}else m.width!==1/0&&oi.forEach(function(A){r[A]*=m.width}),m.height!==1/0&&ni.forEach(function(A){r[A]*=m.height});return r}function Ae(e,t,i){return t==0&&i==0?e/2:t==0?0:i==0?e:e*Math.abs(t/(t+i))}var yi=X("vue-simple-handler"),Ai=X("vue-simple-handler-wrapper"),Xe={name:"SimpleHandler",components:{HandlerWrapper:pt},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){var e,t=(O(e={},this.horizontalPosition,!!this.horizontalPosition),O(e,this.verticalPosition,!!this.verticalPosition),O(e,"".concat(this.horizontalPosition,"-").concat(this.verticalPosition),!!(this.verticalPosition&&this.horizontalPosition)),O(e,"hover",this.hover),e);return{default:P(yi(t),this.defaultClass,this.hover&&this.hoverClass),wrapper:P(Ai(t),this.wrapperClass)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};Xe.render=function(e,t,i,o,n,s){var l=F("HandlerWrapper");return g(),M(l,{class:s.classes.wrapper,"vertical-position":i.verticalPosition,"horizontal-position":i.horizontalPosition,disabled:i.disabled,onDrag:s.onDrag,onDragEnd:s.onDragEnd,onEnter:s.onEnter,onLeave:s.onLeave},{default:ie(function(){return[L("div",{class:s.classes.default},null,2)]}),_:1},8,["class","vertical-position","horizontal-position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var zi=X("vue-simple-line"),xi=X("vue-simple-line-wrapper"),Ye={name:"SimpleLine",components:{LineWrapper:ft},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},position:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){return{root:P(zi(O({},this.position,!0)),this.defaultClass,this.hover&&this.hoverClass),wrapper:P(xi(O({},this.position,!0)),this.wrapperClass)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};Ye.render=function(e,t,i,o,n,s){var l=F("LineWrapper");return g(),M(l,{class:s.classes.wrapper,position:i.position,disabled:i.disabled,onDrag:s.onDrag,onDragEnd:s.onDragEnd,onEnter:s.onEnter,onLeave:s.onLeave},{default:ie(function(){return[L("div",{class:s.classes.root},null,2)]}),_:1},8,["class","position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var De=X("vue-bounding-box"),Ri=["east","west",null],Ci=["south","north",null],yt={name:"BoundingBox",props:{width:{type:Number},height:{type:Number},transitions:{type:Object},handlers:{type:Object,default:function(){return{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}}},handlersComponent:{type:[Object,String],default:function(){return Xe}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}},lines:{type:Object,default:function(){return{west:!0,north:!0,east:!0,south:!0}}},linesComponent:{type:[Object,String],default:function(){return Ye}},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},resizable:{type:Boolean,default:!0}},data:function(){var e=[];return Ri.forEach(function(t){Ci.forEach(function(i){if(t!==i){var o=ut(t,i),n=o.name,s=o.classname;e.push({name:n,classname:s,verticalDirection:i,horizontalDirection:t})}})}),{points:e}},computed:{style:function(){var e={};return this.width&&this.height&&(e.width="".concat(this.width,"px"),e.height="".concat(this.height,"px"),this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction))),e},classes:function(){var e=this.handlersClasses,t=this.handlersWrappersClasses,i=this.linesClasses,o=this.linesWrappersClasses;return{root:De(),handlers:e,handlersWrappers:t,lines:i,linesWrappers:o}},lineNodes:function(){var e=this,t=[];return this.points.forEach(function(i){i.horizontalDirection&&i.verticalDirection||!e.lines[i.name]||t.push({name:i.name,component:e.linesComponent,class:P(e.classes.lines.default,e.classes.lines[i.name],!e.resizable&&e.classes.lines.disabled),wrapperClass:P(e.classes.linesWrappers.default,e.classes.linesWrappers[i.name],!e.resizable&&e.classes.linesWrappers.disabled),hoverClass:e.classes.lines.hover,verticalDirection:i.verticalDirection,horizontalDirection:i.horizontalDirection,disabled:!e.resizable})}),t},handlerNodes:function(){var e=this,t=[],i=this.width,o=this.height;return this.points.forEach(function(n){if(e.handlers[n.name]){var s={name:n.name,component:e.handlersComponent,class:P(e.classes.handlers.default,e.classes.handlers[n.name]),wrapperClass:P(e.classes.handlersWrappers.default,e.classes.handlersWrappers[n.name]),hoverClass:e.classes.handlers.hover,verticalDirection:n.verticalDirection,horizontalDirection:n.horizontalDirection,disabled:!e.resizable};if(i&&o){var l=n.horizontalDirection,a=n.verticalDirection,r=l==="east"?i:l==="west"?0:i/2,d=a==="south"?o:a==="north"?0:o/2;s.wrapperClass=De("handler"),s.wrapperStyle={transform:"translate(".concat(r,"px, ").concat(d,"px)")},e.transitions&&e.transitions.enabled&&(s.wrapperStyle.transition="".concat(e.transitions.time,"ms ").concat(e.transitions.timingFunction))}else s.wrapperClass=De("handler",O({},n.classname,!0));t.push(s)}}),t}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[]},methods:{onEnd:function(){this.$emit("resize-end")},onHandlerDrag:function(e,t,i){var o,n=e.shift(),s=n.left,l=n.top,a={left:0,right:0,top:0,bottom:0};t==="west"?a.left-=s:t==="east"&&(a.right+=s),i==="north"?a.top-=l:i==="south"&&(a.bottom+=l),!i&&t?o="width":i&&!t&&(o="height"),this.resizable&&this.$emit("resize",new ti(a,{allowedDirections:{left:t==="west"||!t,right:t==="east"||!t,bottom:i==="south"||!i,top:i==="north"||!i},preserveAspectRatio:e.nativeEvent&&e.nativeEvent.shiftKey,respectDirection:o}))}},emits:["resize","resize-end"]};yt.render=function(e,t,i,o,n,s){return g(),M("div",{ref:"box",class:s.classes.root,style:s.style},[ne(e.$slots,"default"),L("div",null,[(g(!0),M(ee,null,se(s.lineNodes,function(l){return g(),M(Re(l.component),{key:l.name,"default-class":l.class,"hover-class":l.hoverClass,"wrapper-class":l.wrapperClass,position:l.name,disabled:l.disabled,onDrag:function(a){return s.onHandlerDrag(a,l.horizontalDirection,l.verticalDirection)},onDragEnd:t[1]||(t[1]=function(a){return s.onEnd()})},null,8,["default-class","hover-class","wrapper-class","position","disabled","onDrag"])}),128))]),(g(!0),M(ee,null,se(s.handlerNodes,function(l){return g(),M("div",{key:l.name,style:l.wrapperStyle,class:l.wrapperClass},[(g(),M(Re(l.component),{"default-class":l.class,"hover-class":l.hoverClass,"wrapper-class":l.wrapperClass,"horizontal-position":l.horizontalDirection,"vertical-position":l.verticalDirection,disabled:l.disabled,onDrag:function(a){return s.onHandlerDrag(a,l.horizontalDirection,l.verticalDirection)},onDragEnd:t[2]||(t[2]=function(a){return s.onEnd()})},null,8,["default-class","hover-class","wrapper-class","horizontal-position","vertical-position","disabled","onDrag"]))],6)}),128))],6)};var Mi=X("vue-draggable-area"),At={name:"DraggableArea",props:{movable:{type:Boolean,default:!0},activationDistance:{type:Number,default:20}},computed:{classnames:function(){return{default:Mi()}}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[],this.touchStarted=!1},methods:{onTouchStart:function(e){if(e.cancelable){var t=this.movable&&e.touches.length===1;t&&(this.touches=oe(e.touches)),(this.touchStarted||t)&&(e.preventDefault(),e.stopPropagation())}},onTouchEnd:function(){this.touchStarted=!1,this.processEnd()},onTouchMove:function(e){this.touches.length>=1&&(this.touchStarted?(this.processMove(e,e.touches),e.preventDefault(),e.stopPropagation()):gt({x:this.touches[0].clientX,y:this.touches[0].clientY},{x:e.touches[0].clientX,y:e.touches[0].clientY})>this.activationDistance&&(this.initAnchor({clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}),this.touchStarted=!0))},onMouseDown:function(e){if(this.movable&&e.button===0){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.cancelable&&e.preventDefault(),e.stopPropagation())},onMouseUp:function(){this.processEnd()},initAnchor:function(e){var t=this.$refs.container.getBoundingClientRect(),i=t.left,o=t.top;this.anchor={x:e.clientX-i,y:e.clientY-o}},processMove:function(e,t){var i=oe(t);if(this.touches.length){var o=this.$refs.container.getBoundingClientRect(),n=o.left,s=o.top;this.touches.length===1&&i.length===1&&this.$emit("move",new Ue({left:i[0].clientX-(n+this.anchor.x),top:i[0].clientY-(s+this.anchor.y)}))}},processEnd:function(){this.touches.length&&this.$emit("move-end"),this.touches=[]}},emits:["move","move-end"]};At.render=function(e,t,i,o,n,s){return g(),M("div",{ref:"container",onTouchstart:t[1]||(t[1]=function(){return s.onTouchStart&&s.onTouchStart.apply(s,arguments)}),onMousedown:t[2]||(t[2]=function(){return s.onMouseDown&&s.onMouseDown.apply(s,arguments)})},[ne(e.$slots,"default")],544)};function We(e){var t,i;return{rotate:e.rotate||0,flip:{horizontal:((t=e==null?void 0:e.flip)===null||t===void 0?void 0:t.horizontal)||!1,vertical:((i=e==null?void 0:e.flip)===null||i===void 0?void 0:i.vertical)||!1}}}function Si(e){return new Promise(function(t,i){try{if(e)if(/^data:/i.test(e))t(function(r){r=r.replace(/^data:([^;]+);base64,/gim,"");for(var d=atob(r),u=d.length,c=new ArrayBuffer(u),m=new Uint8Array(c),p=0;p<u;p++)m[p]=d.charCodeAt(p);return c}(e));else if(/^blob:/i.test(e)){var o=new FileReader;o.onload=function(r){t(r.target.result)},s=e,l=function(r){o.readAsArrayBuffer(r)},(a=new XMLHttpRequest).open("GET",s,!0),a.responseType="blob",a.onload=function(){this.status!=200&&this.status!==0||l(this.response)},a.send()}else{var n=new XMLHttpRequest;n.onreadystatechange=function(){n.readyState===4&&(n.status===200||n.status===0?t(n.response):i("Warning: could not load an image to parse its orientation"),n=null)},n.onprogress=function(){n.getResponseHeader("content-type")!=="image/jpeg"&&n.abort()},n.withCredentials=!1,n.open("GET",e,!0),n.responseType="arraybuffer",n.send(null)}else i("Error: the image is empty")}catch(r){i(r)}var s,l,a})}function zt(e){var t=e.rotate,i=e.flip,o=e.scaleX,n=e.scaleY,s="";return s+=" rotate("+t+"deg) ",s+=" scaleX("+o*(i.horizontal?-1:1)+") ",s+=" scaleY("+n*(i.vertical?-1:1)+") "}function Ei(e){try{var t,i=new DataView(e),o=void 0,n=void 0,s=void 0,l=void 0;if(i.getUint8(0)===255&&i.getUint8(1)===216)for(var a=i.byteLength,r=2;r+1<a;){if(i.getUint8(r)===255&&i.getUint8(r+1)===225){s=r;break}r++}if(s&&(o=s+10,function(p,y,A){var $,B="";for($=y,A+=y;$<A;$++)B+=String.fromCharCode(p.getUint8($));return B}(i,s+4,4)==="Exif")){var d=i.getUint16(o);if(((n=d===18761)||d===19789)&&i.getUint16(o+2,n)===42){var u=i.getUint32(o+4,n);u>=8&&(l=o+u)}}if(l){for(var c=i.getUint16(l,n),m=0;m<c;m++)if(r=l+12*m+2,i.getUint16(r,n)===274){r+=8,t=i.getUint16(r,n),i.setUint16(r,1,n);break}}return t}catch{return null}}function ot(e,t){var i=t.getBoundingClientRect(),o=i.left,n=i.top,s={left:0,top:0},l=0;return e.forEach(function(a){s.left+=(a.clientX-o)/e.length,s.top+=(a.clientY-n)/e.length}),e.forEach(function(a){l+=gt({x:s.left,y:s.top},{x:a.clientX-o,y:a.clientY-n})}),{centerMass:s,spread:l,count:e.length}}var xt={props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0},eventsFilter:{type:Function,required:!1}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},created:function(){this.transforming=!1,this.debouncedProcessEnd=je(this.processEnd),this.touches=[]},methods:{processMove:function(e,t){if(this.touches.length){if(this.touches.length===1&&t.length===1)this.$emit("move",new me({left:this.touches[0].clientX-t[0].clientX,top:this.touches[0].clientY-t[0].clientY}));else if(this.touches.length>1&&this.touchResize){var i=ot(t,this.$refs.container),o=this.oldGeometricProperties;o.count===i.count&&o.count>1&&this.$emit("resize",new me({left:o.centerMass.left-i.centerMass.left,top:o.centerMass.top-i.centerMass.top},{factor:o.spread/i.spread,center:i.centerMass})),this.oldGeometricProperties=i}this.touches=t}},processEnd:function(){this.transforming&&(this.transforming=!1,this.$emit("transform-end"))},processStart:function(){this.transforming=!0,this.debouncedProcessEnd.clear()},processEvent:function(e){return this.eventsFilter?this.eventsFilter(e,this.transforming)!==!1:(e.preventDefault(),e.stopPropagation(),!0)},onTouchStart:function(e){if(e.cancelable&&(this.touchMove||this.touchResize&&e.touches.length>1)&&this.processEvent(e)){var t=this.$refs.container,i=t.getBoundingClientRect(),o=i.left,n=i.top,s=i.bottom,l=i.right;this.touches=oe(e.touches).filter(function(a){return a.clientX>o&&a.clientX<l&&a.clientY>n&&a.clientY<s}),this.oldGeometricProperties=ot(this.touches,t)}},onTouchEnd:function(e){e.touches.length===0&&(this.touches=[],this.processEnd())},onTouchMove:function(e){var t=this;if(this.touches.length){var i=oe(e.touches).filter(function(o){return!o.identifier||t.touches.find(function(n){return n.identifier===o.identifier})});this.processEvent(e)&&(this.processMove(e,i),this.processStart())}},onMouseDown:function(e){if(this.mouseMove&&"buttons"in e&&e.buttons===1&&this.processEvent(e)){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.processStart()}},onMouseMove:function(e){this.touches.length&&this.processEvent(e)&&this.processMove(e,[{clientX:e.clientX,clientY:e.clientY}])},onMouseUp:function(){this.touches=[],this.processEnd()},onWheel:function(e){if(this.wheelResize&&this.processEvent(e)){var t=this.$refs.container.getBoundingClientRect(),i=t.left,o=t.top,n=1+this.wheelResize.ratio*(l=e.deltaY||e.detail||e.wheelDelta,(a=+l)==0||mt(a)?a:a>0?1:-1),s={left:e.clientX-i,top:e.clientY-o};this.$emit("resize",new me({},{factor:n,center:s})),this.touches.length||this.debouncedProcessEnd()}var l,a}},emits:["resize","move","transform-end"]};xt.render=function(e,t,i,o,n,s){return g(),M("div",{ref:"container",onTouchstart:t[1]||(t[1]=function(){return s.onTouchStart&&s.onTouchStart.apply(s,arguments)}),onMousedown:t[2]||(t[2]=function(){return s.onMouseDown&&s.onMouseDown.apply(s,arguments)}),onWheel:t[3]||(t[3]=function(){return s.onWheel&&s.onWheel.apply(s,arguments)})},[ne(e.$slots,"default")],544)};var Ne={components:{TransformableImage:xt},props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0}},emits:["resize","move"]};Ne.render=function(e,t,i,o,n,s){var l=F("transformable-image");return g(),M(l,{"touch-move":i.touchMove,"touch-resize":i.touchResize,"mouse-move":i.mouseMove,"wheel-resize":i.wheelResize,onMove:t[1]||(t[1]=function(a){return e.$emit("move",a)}),onResize:t[2]||(t[2]=function(a){return e.$emit("resize",a)})},{default:ie(function(){return[ne(e.$slots,"default")]}),_:3},8,["touch-move","touch-resize","mouse-move","wheel-resize"])};var ze=X("vue-preview"),Rt={props:{coordinates:{type:Object},transitions:{type:Object},image:{type:Object,default:function(){return{}}},imageClass:{type:String},width:{type:Number},height:{type:Number},fill:{type:Boolean}},data:function(){return{calculatedImageSize:{width:0,height:0},calculatedSize:{width:0,height:0}}},computed:{classes:function(){return{root:ze({fill:this.fill}),wrapper:ze("wrapper"),imageWrapper:ze("image-wrapper"),image:P(ze("image"),this.imageClass)}},style:function(){if(this.fill)return{};var e={};return this.width&&(e.width="".concat(this.size.width,"px")),this.height&&(e.height="".concat(this.size.height,"px")),this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),e},wrapperStyle:function(){var e={width:"".concat(this.size.width,"px"),height:"".concat(this.size.height,"px"),left:"calc(50% - ".concat(this.size.width/2,"px)"),top:"calc(50% - ".concat(this.size.height/2,"px)")};return this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),e},imageStyle:function(){if(this.coordinates&&this.image){var e=this.coordinates.width/this.size.width,t=z(z({rotate:0,flip:{horizontal:!1,vertical:!1}},this.image.transforms),{},{scaleX:1/e,scaleY:1/e}),i=this.imageSize.width,o=this.imageSize.height,n=bt({width:i,height:o},t.rotate),s={width:"".concat(i,"px"),height:"".concat(o,"px"),left:"0px",top:"0px"},l={rotate:{left:(i-n.width)*t.scaleX/2,top:(o-n.height)*t.scaleY/2},scale:{left:(1-t.scaleX)*i/2,top:(1-t.scaleY)*o/2}};return s.transform=`translate(
				`.concat(-this.coordinates.left/e-l.rotate.left-l.scale.left,"px,").concat(-this.coordinates.top/e-l.rotate.top-l.scale.top,"px) ")+zt(t),this.transitions&&this.transitions.enabled&&(s.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),s}return{}},size:function(){return{width:this.width||this.calculatedSize.width,height:this.height||this.calculatedSize.height}},imageSize:function(){return{width:this.image.width||this.calculatedImageSize.width,height:this.image.height||this.calculatedImageSize.height}}},watch:{image:function(e){(e.width||e.height)&&this.onChangeImage()}},mounted:function(){var e=this;this.onChangeImage(),this.$refs.image.addEventListener("load",function(){e.refreshImage()}),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh)},methods:{refreshImage:function(){var e=this.$refs.image;this.calculatedImageSize.height=e.naturalHeight,this.calculatedImageSize.width=e.naturalWidth},refresh:function(){var e=this.$refs.root;this.width||(this.calculatedSize.width=e.clientWidth),this.height||(this.calculatedSize.height=e.clientHeight)},onChangeImage:function(){var e=this.$refs.image;e&&e.complete&&this.refreshImage(),this.refresh()}}};Rt.render=function(e,t,i,o,n,s){return g(),M("div",{ref:"root",class:s.classes.root,style:s.style},[L("div",{ref:"wrapper",class:s.classes.wrapper,style:s.wrapperStyle},[k(L("img",{ref:"image",src:i.image&&i.image.src,class:s.classes.image,style:s.imageStyle},null,14,["src"]),[[at,i.image&&i.image.src]])],6)],6)};var Ct={components:{Preview:Rt},inheritAttrs:!1};Ct.render=function(e,t,i,o,n,s){var l=F("preview");return g(),M(l,lt(e.$attrs,{fill:!0}),null,16)};var Le=X("vue-rectangle-stencil"),Mt={name:"RectangleStencil",components:{StencilPreview:Ct,BoundingBox:yt,DraggableArea:At},props:{image:{type:Object},coordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object},handlersComponent:{type:[Object,String],default:function(){return Xe}},lines:{type:Object},linesComponent:{type:[Object,String],default:function(){return Ye}},aspectRatio:{type:[Number,String]},minAspectRatio:{type:[Number,String]},maxAspectRatio:{type:[Number,String]},movable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},transitions:{type:Object},movingClass:{type:String},resizingClass:{type:String},previewClass:{type:String},boundingBoxClass:{type:String},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}}},data:function(){return{moving:!1,resizing:!1}},computed:{classes:function(){return{stencil:P(Le({movable:this.movable,moving:this.moving,resizing:this.resizing}),this.moving&&this.movingClass,this.resizing&&this.resizingClass),preview:P(Le("preview"),this.previewClass),boundingBox:P(Le("bounding-box"),this.boundingBoxClass)}},style:function(){var e=this.stencilCoordinates,t=e.height,i=e.width,o=e.left,n=e.top,s={width:"".concat(i,"px"),height:"".concat(t,"px"),transform:"translate(".concat(o,"px, ").concat(n,"px)")};return this.transitions&&this.transitions.enabled&&(s.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),s}},methods:{onMove:function(e){this.$emit("move",e),this.moving=!0},onMoveEnd:function(){this.$emit("move-end"),this.moving=!1},onResize:function(e){this.$emit("resize",e),this.resizing=!0},onResizeEnd:function(){this.$emit("resize-end"),this.resizing=!1},aspectRatios:function(){return{minimum:this.aspectRatio||this.minAspectRatio,maximum:this.aspectRatio||this.maxAspectRatio}}},emits:["resize","resize-end","move","move-end"]};Mt.render=function(e,t,i,o,n,s){var l=F("stencil-preview"),a=F("draggable-area"),r=F("bounding-box");return g(),M("div",{class:s.classes.stencil,style:s.style},[L(r,{width:i.stencilCoordinates.width,height:i.stencilCoordinates.height,transitions:i.transitions,class:s.classes.boundingBox,handlers:i.handlers,"handlers-component":i.handlersComponent,"handlers-classes":i.handlersClasses,"handlers-wrappers-classes":i.handlersWrappersClasses,lines:i.lines,"lines-component":i.linesComponent,"lines-classes":i.linesClasses,"lines-wrappers-classes":i.linesWrappersClasses,resizable:i.resizable,onResize:s.onResize,onResizeEnd:s.onResizeEnd},{default:ie(function(){return[L(a,{movable:i.movable,onMove:s.onMove,onMoveEnd:s.onMoveEnd},{default:ie(function(){return[L(l,{image:i.image,coordinates:i.coordinates,width:i.stencilCoordinates.width,height:i.stencilCoordinates.height,class:s.classes.preview,transitions:i.transitions},null,8,["image","coordinates","width","height","class","transitions"])]}),_:1},8,["movable","onMove","onMoveEnd"])]}),_:1},8,["width","height","transitions","class","handlers","handlers-component","handlers-classes","handlers-wrappers-classes","lines","lines-component","lines-classes","lines-wrappers-classes","resizable","onResize","onResizeEnd"])],6)};var ki=["transitions"],Q=X("vue-advanced-cropper"),St={name:"Cropper",components:{BackgroundWrapper:Ne},props:{src:{type:String,default:null},stencilComponent:{type:[Object,String],default:function(){return Mt}},backgroundWrapperComponent:{type:[Object,String],default:function(){return Ne}},stencilProps:{type:Object,default:function(){return{}}},autoZoom:{type:Boolean,default:!1},imageClass:{type:String},boundariesClass:{type:String},backgroundClass:{type:String},foregroundClass:{type:String},minWidth:{type:[Number,String]},minHeight:{type:[Number,String]},maxWidth:{type:[Number,String]},maxHeight:{type:[Number,String]},debounce:{type:[Boolean,Number],default:500},transitions:{type:Boolean,default:!0},checkOrientation:{type:Boolean,default:!0},canvas:{type:[Object,Boolean],default:!0},crossOrigin:{type:[Boolean,String],default:void 0},transitionTime:{type:Number,default:300},imageRestriction:{type:String,default:"fit-area",validator:function(e){return ai.indexOf(e)!==-1}},roundResult:{type:Boolean,default:!0},defaultSize:{type:[Function,Object]},defaultPosition:{type:[Function,Object]},defaultVisibleArea:{type:[Function,Object]},defaultTransforms:{type:[Function,Object]},defaultBoundaries:{type:[Function,String],validator:function(e){return!(typeof e=="string"&&e!=="fill"&&e!=="fit")}},priority:{type:String,default:"coordinates"},stencilSize:{type:[Object,Function]},resizeImage:{type:[Boolean,Object],default:!0},moveImage:{type:[Boolean,Object],default:!0},autoZoomAlgorithm:{type:Function},resizeAlgorithm:{type:Function,default:function(e){var t=e.event,i=e.coordinates,o=e.aspectRatio,n=e.positionRestrictions,s=e.sizeRestrictions,l=v(v({},i),{right:i.left+i.width,bottom:i.top+i.height}),a=t.params||{},r=v({},t.directions),d=a.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};s.widthFrozen&&(r.left=0,r.right=0),s.heightFrozen&&(r.top=0,r.bottom=0),q.forEach(function(N){d[N]||(r[N]=0)});var u=Z(l,r=st({coordinates:l,directions:r,sizeRestrictions:s,positionRestrictions:n})).width,c=Z(l,r).height,m=a.preserveRatio?x(l):Ie(u/c,o);if(m){var p=a.respectDirection;if(p||(p=l.width>=l.height||m===1?"width":"height"),p==="width"){var y=u/m-l.height;if(d.top&&d.bottom){var A=r.top,$=r.bottom;r.bottom=Ae(y,$,A),r.top=Ae(y,A,$)}else d.bottom?r.bottom=y:d.top?r.top=y:d.right?r.right=0:d.left&&(r.left=0)}else if(p==="height"){var B=l.width-c*m;if(d.left&&d.right){var Y=r.left,V=r.right;r.left=-Ae(B,Y,V),r.right=-Ae(B,V,Y)}else d.left?r.left=-B:d.right?r.right=-B:d.top?r.top=0:d.bottom&&(r.bottom=0)}r=st({directions:r,coordinates:l,sizeRestrictions:s,positionRestrictions:n,preserveRatio:!0,compensate:a.compensate})}return u=Z(l,r).width,c=Z(l,r).height,(m=a.preserveRatio?x(l):Ie(u/c,o))&&Math.abs(m-u/c)>.001&&q.forEach(function(N){d[N]||(r[N]=0)}),Be({event:new Ue({left:-r.left,top:-r.top}),coordinates:{width:i.width+r.right+r.left,height:i.height+r.top+r.bottom,left:i.left,top:i.top},positionRestrictions:n})}},moveAlgorithm:{type:Function,default:Be},initStretcher:{type:Function,default:function(e){var t=e.stretcher,i=e.imageSize,o=x(i);t.style.width=i.width+"px",t.style.height=t.clientWidth/o+"px",t.style.width=t.clientWidth+"px"}},fitCoordinates:{type:Function,default:function(e){var t=e.visibleArea,i=e.coordinates,o=e.aspectRatio,n=e.sizeRestrictions,s=e.positionRestrictions,l=v(v({},i),K({width:i.width,height:i.height,aspectRatio:o,sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minHeight:Math.min(t.height,n.minHeight),minWidth:Math.min(t.width,n.minWidth)}}));return l=W(l=j(l,le(D(i),D(l))),Se(J(t),s))}},fitVisibleArea:{type:Function,default:function(e){var t=e.visibleArea,i=e.boundaries,o=e.getAreaRestrictions,n=e.coordinates,s=v({},t);s.height=s.width/x(i),s.top+=(t.height-s.height)/2,(n.height-s.height>0||n.width-s.width>0)&&(s=H(s,Math.max(n.height/s.height,n.width/s.width)));var l=Ce(de(n,J(s=H(s,Me(s,o({visibleArea:s,type:"resize"}))))));return s.width<n.width&&(l.left=0),s.height<n.height&&(l.top=0),s=W(s=j(s,l),o({visibleArea:s,type:"move"}))}},areaRestrictionsAlgorithm:{type:Function,default:function(e){var t=e.visibleArea,i=e.boundaries,o=e.imageSize,n=e.imageRestriction,s=e.type,l={};return n==="fill-area"?l={left:0,top:0,right:o.width,bottom:o.height}:n==="fit-area"&&(x(i)>x(o)?(l={top:0,bottom:o.height},t&&s==="move"&&(t.width>o.width?(l.left=-(t.width-o.width)/2,l.right=o.width-l.left):(l.left=0,l.right=o.width))):(l={left:0,right:o.width},t&&s==="move"&&(t.height>o.height?(l.top=-(t.height-o.height)/2,l.bottom=o.height-l.top):(l.top=0,l.bottom=o.height)))),l}},sizeRestrictionsAlgorithm:{type:Function,default:function(e){return{minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight}}},positionRestrictionsAlgorithm:{type:Function,default:function(e){var t=e.imageSize,i={};return e.imageRestriction!=="none"&&(i={left:0,top:0,right:t.width,bottom:t.height}),i}}},data:function(){return{transitionsActive:!1,imageLoaded:!1,imageAttributes:{width:null,height:null,crossOrigin:null,src:null},defaultImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},appliedImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},boundaries:{width:0,height:0},visibleArea:null,coordinates:z({},_e)}},computed:{image:function(){return{src:this.imageAttributes.src,width:this.imageAttributes.width,height:this.imageAttributes.height,transforms:this.imageTransforms}},imageTransforms:function(){return{rotate:this.appliedImageTransforms.rotate,flip:{horizontal:this.appliedImageTransforms.flip.horizontal,vertical:this.appliedImageTransforms.flip.vertical},translateX:this.visibleArea?this.visibleArea.left/this.coefficient:0,translateY:this.visibleArea?this.visibleArea.top/this.coefficient:0,scaleX:1/this.coefficient,scaleY:1/this.coefficient}},imageSize:function(){var e=function(t){return t*Math.PI/180}(this.imageTransforms.rotate);return{width:Math.abs(this.imageAttributes.width*Math.cos(e))+Math.abs(this.imageAttributes.height*Math.sin(e)),height:Math.abs(this.imageAttributes.width*Math.sin(e))+Math.abs(this.imageAttributes.height*Math.cos(e))}},initialized:function(){return!!(this.visibleArea&&this.imageLoaded)},settings:function(){var e=Oe(this.resizeImage,{touch:!0,wheel:{ratio:.1},adjustStencil:!0},{touch:!1,wheel:!1,adjustStencil:!1});return{moveImage:Oe(this.moveImage,{touch:!0,mouse:!0},{touch:!1,mouse:!1}),resizeImage:e}},coefficient:function(){return this.visibleArea?this.visibleArea.width/this.boundaries.width:0},areaRestrictions:function(){return this.imageLoaded?this.areaRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction,boundaries:this.boundaries}):{}},transitionsOptions:function(){return{enabled:this.transitionsActive,timingFunction:"ease-in-out",time:350}},sizeRestrictions:function(){if(this.boundaries.width&&this.boundaries.height&&this.imageSize.width&&this.imageSize.height){var e=this.sizeRestrictionsAlgorithm({imageSize:this.imageSize,minWidth:I(this.minWidth)?0:we(this.minWidth),minHeight:I(this.minHeight)?0:we(this.minHeight),maxWidth:I(this.maxWidth)?1/0:we(this.maxWidth),maxHeight:I(this.maxHeight)?1/0:we(this.maxHeight)});if(e=function(o){var n=o.areaRestrictions,s=o.sizeRestrictions,l=o.boundaries,a=o.positionRestrictions,r=v(v({},s),{minWidth:s.minWidth!==void 0?s.minWidth:0,minHeight:s.minHeight!==void 0?s.minHeight:0,maxWidth:s.maxWidth!==void 0?s.maxWidth:1/0,maxHeight:s.maxHeight!==void 0?s.maxHeight:1/0});a.left!==void 0&&a.right!==void 0&&(r.maxWidth=Math.min(r.maxWidth,a.right-a.left)),a.bottom!==void 0&&a.top!==void 0&&(r.maxHeight=Math.min(r.maxHeight,a.bottom-a.top));var d=He(n),u=vt(l,d);return d.width<1/0&&(!r.maxWidth||r.maxWidth>u.width)&&(r.maxWidth=Math.min(r.maxWidth,u.width)),d.height<1/0&&(!r.maxHeight||r.maxHeight>u.height)&&(r.maxHeight=Math.min(r.maxHeight,u.height)),r.minWidth>r.maxWidth&&(r.minWidth=r.maxWidth,r.widthFrozen=!0),r.minHeight>r.maxHeight&&(r.minHeight=r.maxHeight,r.heightFrozen=!0),r}({sizeRestrictions:e,areaRestrictions:this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}),imageSize:this.imageSize,boundaries:this.boundaries,positionRestrictions:this.positionRestrictions,imageRestriction:this.imageRestriction,visibleArea:this.visibleArea,stencilSize:this.getStencilSize()}),this.visibleArea&&this.stencilSize){var t=this.getStencilSize(),i=He(this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}));e.maxWidth=Math.min(e.maxWidth,i.width*t.width/this.boundaries.width),e.maxHeight=Math.min(e.maxHeight,i.height*t.height/this.boundaries.height),e.maxWidth<e.minWidth&&(e.minWidth=e.maxWidth),e.maxHeight<e.minHeight&&(e.minHeight=e.maxHeight)}return e}return{minWidth:0,minHeight:0,maxWidth:0,maxHeight:0}},positionRestrictions:function(){return this.positionRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction})},classes:function(){return{cropper:Q(),image:P(Q("image"),this.imageClass),stencil:Q("stencil"),boundaries:P(Q("boundaries"),this.boundariesClass),stretcher:P(Q("stretcher")),background:P(Q("background"),this.backgroundClass),foreground:P(Q("foreground"),this.foregroundClass),imageWrapper:P(Q("image-wrapper")),cropperWrapper:P(Q("cropper-wrapper"))}},stencilCoordinates:function(){if(this.initialized){var e=this.coordinates,t=e.width,i=e.height,o=e.left,n=e.top;return{width:t/this.coefficient,height:i/this.coefficient,left:(o-this.visibleArea.left)/this.coefficient,top:(n-this.visibleArea.top)/this.coefficient}}return this.defaultCoordinates()},boundariesStyle:function(){var e={width:this.boundaries.width?"".concat(Math.round(this.boundaries.width),"px"):"auto",height:this.boundaries.height?"".concat(Math.round(this.boundaries.height),"px"):"auto",transition:"opacity ".concat(this.transitionTime,"ms"),pointerEvents:this.imageLoaded?"all":"none"};return this.imageLoaded||(e.opacity="0"),e},imageStyle:function(){var e=this.imageAttributes.width>this.imageAttributes.height?{width:Math.min(1024,this.imageAttributes.width),height:Math.min(1024,this.imageAttributes.width)/(this.imageAttributes.width/this.imageAttributes.height)}:{height:Math.min(1024,this.imageAttributes.height),width:Math.min(1024,this.imageAttributes.height)*(this.imageAttributes.width/this.imageAttributes.height)},t={left:(e.width-this.imageSize.width)/(2*this.coefficient),top:(e.height-this.imageSize.height)/(2*this.coefficient)},i={left:(1-1/this.coefficient)*e.width/2,top:(1-1/this.coefficient)*e.height/2},o=z(z({},this.imageTransforms),{},{scaleX:this.imageTransforms.scaleX*(this.imageAttributes.width/e.width),scaleY:this.imageTransforms.scaleY*(this.imageAttributes.height/e.height)}),n={width:"".concat(e.width,"px"),height:"".concat(e.height,"px"),left:"0px",top:"0px",transform:"translate(".concat(-t.left-i.left-this.imageTransforms.translateX,"px, ").concat(-t.top-i.top-this.imageTransforms.translateY,"px)")+zt(o)};return this.transitionsOptions.enabled&&(n.transition="".concat(this.transitionsOptions.time,"ms ").concat(this.transitionsOptions.timingFunction)),n}},watch:{src:function(){this.onChangeImage()},stencilComponent:function(){var e=this;this.$nextTick(function(){e.resetCoordinates(),e.runAutoZoom("setCoordinates"),e.onChange()})},minWidth:function(){this.onPropsChange()},maxWidth:function(){this.onPropsChange()},minHeight:function(){this.onPropsChange()},maxHeight:function(){this.onPropsChange()},imageRestriction:function(){this.reset()},stencilProps:function(e,t){["aspectRatio","minAspectRatio","maxAspectRatio"].find(function(i){return e[i]!==t[i]})&&this.$nextTick(this.onPropsChange)}},created:function(){this.debouncedUpdate=je(this.update,this.debounce),this.debouncedDisableTransitions=je(this.disableTransitions,this.transitionsOptions.time),this.awaiting=!1},mounted:function(){this.$refs.image.addEventListener("load",this.onSuccessLoadImage),this.$refs.image.addEventListener("error",this.onFailLoadImage),this.onChangeImage(),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh),this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.debouncedUpdate.clear(),this.debouncedDisableTransitions.clear()},methods:{getResult:function(){var e=this.initialized?this.prepareResult(z({},this.coordinates)):this.defaultCoordinates(),t={rotate:this.imageTransforms.rotate%360,flip:z({},this.imageTransforms.flip)};if(this.src&&this.imageLoaded){var i=this;return{image:this.image,coordinates:e,visibleArea:this.visibleArea?z({},this.visibleArea):null,imageTransforms:t,get canvas(){return i.canvas?i.getCanvas():void 0}}}return{image:this.image,coordinates:e,visibleArea:this.visibleArea?z({},this.visibleArea):null,canvas:void 0,imageTransforms:t}},zoom:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.transitions,n=o===void 0||o;this.onManipulateImage(new me({},{factor:1/e,center:t}),{normalize:!1,transitions:n})},move:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.transitions,n=o===void 0||o;this.onManipulateImage(new me({left:e||0,top:t||0}),{normalize:!1,transitions:n})},setCoordinates:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.autoZoom,n=o===void 0||o,s=i.transitions,l=s===void 0||s;this.$nextTick(function(){t.imageLoaded?(t.transitionsActive||(l&&t.enableTransitions(),t.coordinates=t.applyTransform(e),n&&t.runAutoZoom("setCoordinates"),l&&t.debouncedDisableTransitions()),t.onChange()):t.delayedTransforms=e})},refresh:function(){var e=this,t=this.$refs.image;if(this.src&&t)return this.initialized?this.updateVisibleArea().then(function(){e.onChange()}):this.resetVisibleArea().then(function(){e.onChange()})},reset:function(){var e=this;return this.resetVisibleArea().then(function(){e.onChange(!1)})},awaitRender:function(e){var t=this;this.awaiting||(this.awaiting=!0,this.$nextTick(function(){e(),t.awaiting=!1}))},prepareResult:function(e){return this.roundResult?function(t){var i=t.coordinates,o=t.sizeRestrictions,n=t.positionRestrictions,s={width:Math.round(i.width),height:Math.round(i.height),left:Math.round(i.left),top:Math.round(i.top)};return s.width>o.maxWidth?s.width=Math.floor(i.width):s.width<o.minWidth&&(s.width=Math.ceil(i.width)),s.height>o.maxHeight?s.height=Math.floor(i.height):s.height<o.minHeight&&(s.height=Math.ceil(i.height)),W(s,n)}(z(z({},this.getPublicProperties()),{},{positionRestrictions:ye(this.positionRestrictions,this.visibleArea),coordinates:e})):e},processAutoZoom:function(e,t,i,o){var n=this.autoZoomAlgorithm;n||(n=this.stencilSize?di:this.autoZoom?ui:ci);var s=n({event:{type:e,params:o},visibleArea:t,coordinates:i,boundaries:this.boundaries,aspectRatio:this.getAspectRatio(),positionRestrictions:this.positionRestrictions,getAreaRestrictions:this.getAreaRestrictions,sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize()});return z(z({},s),{},{changed:!et(s.visibleArea,t)||!et(s.coordinates,i)})},runAutoZoom:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.transitions,o=i!==void 0&&i,n=_t(t,ki),s=this.processAutoZoom(e,this.visibleArea,this.coordinates,n),l=s.visibleArea,a=s.coordinates,r=s.changed;o&&r&&this.enableTransitions(),this.visibleArea=l,this.coordinates=a,o&&r&&this.debouncedDisableTransitions()},normalizeEvent:function(e){return function(t){var i=t.event,o=t.visibleArea,n=t.coefficient;if(i.type==="manipulateImage")return v(v({},i),{move:{left:i.move&&i.move.left?n*i.move.left:0,top:i.move&&i.move.top?n*i.move.top:0},scale:{factor:i.scale&&i.scale.factor?i.scale.factor:1,center:i.scale&&i.scale.center?{left:i.scale.center.left*n+o.left,top:i.scale.center.top*n+o.top}:null}});if(i.type==="resize"){var s=v(v({},i),{directions:v({},i.directions)});return q.forEach(function(a){s.directions[a]*=n}),s}if(i.type==="move"){var l=v(v({},i),{directions:v({},i.directions)});return ri.forEach(function(a){l.directions[a]*=n}),l}return i}(z(z({},this.getPublicProperties()),{},{event:e}))},getCanvas:function(){if(this.$refs.canvas){var e=this.$refs.canvas,t=this.$refs.image,i=this.imageTransforms.rotate!==0||this.imageTransforms.flip.horizontal||this.imageTransforms.flip.vertical?function(a,r,d){var u=d.rotate,c=d.flip,m={width:r.naturalWidth,height:r.naturalHeight},p=bt(m,u),y=a.getContext("2d");a.height=p.height,a.width=p.width,y.save();var A=te(D(v({left:0,top:0},m)),u);return y.translate(-(A.left-p.width/2),-(A.top-p.height/2)),y.rotate(u*Math.PI/180),y.translate(c.horizontal?m.width:0,c.vertical?m.height:0),y.scale(c.horizontal?-1:1,c.vertical?-1:1),y.drawImage(r,0,0,m.width,m.height),y.restore(),a}(this.$refs.sourceCanvas,t,this.imageTransforms):t,o=z({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,maxArea:this.maxCanvasSize,imageSmoothingEnabled:!0,imageSmoothingQuality:"high",fillColor:"transparent"},this.canvas),n=function(a){return a.find(function(r){return d=r,!Number.isNaN(parseFloat(d))&&isFinite(d);var d})},s=K({sizeRestrictions:{minWidth:n([o.width,o.minWidth])||0,minHeight:n([o.height,o.minHeight])||0,maxWidth:n([o.width,o.maxWidth])||1/0,maxHeight:n([o.height,o.maxHeight])||1/0},width:this.coordinates.width,height:this.coordinates.height,aspectRatio:{minimum:this.coordinates.width/this.coordinates.height,maximum:this.coordinates.width/this.coordinates.height}});if(o.maxArea&&s.width*s.height>o.maxArea){var l=Math.sqrt(o.maxArea/(s.width*s.height));s={width:Math.round(l*s.width),height:Math.round(l*s.height)}}return function(a,r,d,u,c){a.width=u?u.width:d.width,a.height=u?u.height:d.height;var m=a.getContext("2d");m.clearRect(0,0,a.width,a.height),c&&(c.imageSmoothingEnabled&&(m.imageSmoothingEnabled=c.imageSmoothingEnabled),c.imageSmoothingQuality&&(m.imageSmoothingQuality=c.imageSmoothingQuality),c.fillColor&&(m.fillStyle=c.fillColor,m.fillRect(0,0,a.width,a.height),m.save()));var p=d.left<0?-d.left:0,y=d.top<0?-d.top:0;m.drawImage(r,d.left+p,d.top+y,d.width,d.height,p*(a.width/d.width),y*(a.height/d.height),a.width,a.height)}(e,i,this.coordinates,s,o),e}},update:function(){this.$emit("change",this.getResult())},applyTransform:function(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],i=this.visibleArea&&t?li(this.sizeRestrictions,this.visibleArea):this.sizeRestrictions,o=this.visibleArea&&t?ye(this.positionRestrictions,this.visibleArea):this.positionRestrictions;return hi({transform:e,coordinates:this.coordinates,imageSize:this.imageSize,sizeRestrictions:i,positionRestrictions:o,aspectRatio:this.getAspectRatio(),visibleArea:this.visibleArea})},resetCoordinates:function(){var e=this;if(this.$refs.image){this.$refs.cropper,this.$refs.image;var t=this.defaultSize;t||(t=this.stencilSize?pi:gi);var i=this.sizeRestrictions;i.minWidth,i.minHeight,i.maxWidth,i.maxHeight;var o=ae(t)?t({boundaries:this.boundaries,imageSize:this.imageSize,aspectRatio:this.getAspectRatio(),sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize(),visibleArea:this.visibleArea}):t,n=this.defaultPosition||mi,s=[o,function(l){var a=l.coordinates;return z({},ae(n)?n({coordinates:a,imageSize:e.imageSize,visibleArea:e.visibleArea}):e.defaultPosition)}];this.delayedTransforms&&s.push.apply(s,oe(Array.isArray(this.delayedTransforms)?this.delayedTransforms:[this.delayedTransforms])),this.coordinates=this.applyTransform(s,!0),this.delayedTransforms=null}},clearImage:function(){var e=this;this.imageLoaded=!1,setTimeout(function(){var t=e.$refs.stretcher;t&&(t.style.height="auto",t.style.width="auto"),e.coordinates=e.defaultCoordinates(),e.boundaries={width:0,height:0}},this.transitionTime)},enableTransitions:function(){this.transitions&&(this.transitionsActive=!0)},disableTransitions:function(){this.transitionsActive=!1},updateBoundaries:function(){var e=this,t=this.$refs.stretcher,i=this.$refs.cropper;return this.initStretcher({cropper:i,stretcher:t,imageSize:this.imageSize}),this.$nextTick().then(function(){var o={cropper:i,imageSize:e.imageSize};if(ae(e.defaultBoundaries)?e.boundaries=e.defaultBoundaries(o):e.defaultBoundaries==="fit"?e.boundaries=function(n){var s=n.cropper,l=n.imageSize,a=s.clientHeight,r=s.clientWidth,d=a,u=l.width*a/l.height;return u>r&&(u=r,d=l.height*r/l.width),{width:u,height:d}}(o):e.boundaries=function(n){var s=n.cropper;return{width:s.clientWidth,height:s.clientHeight}}(o),!e.boundaries.width||!e.boundaries.height)throw new Error("It's impossible to fit the cropper in the current container")})},resetVisibleArea:function(){var e=this;return this.appliedImageTransforms=z(z({},this.defaultImageTransforms),{},{flip:z({},this.defaultImageTransforms.flip)}),this.updateBoundaries().then(function(){e.priority!=="visible-area"&&(e.visibleArea=null,e.resetCoordinates());var t,i,o,n,s,l,a=e.defaultVisibleArea||fi;e.visibleArea=ae(a)?a({imageSize:e.imageSize,boundaries:e.boundaries,coordinates:e.priority!=="visible-area"?e.coordinates:null,getAreaRestrictions:e.getAreaRestrictions,stencilSize:e.getStencilSize()}):e.defaultVisibleArea,e.visibleArea=(t={visibleArea:e.visibleArea,boundaries:e.boundaries,getAreaRestrictions:e.getAreaRestrictions},i=t.visibleArea,o=t.boundaries,n=t.getAreaRestrictions,s=v({},i),l=x(o),s.width/s.height!==l&&(s.height=s.width/l),W(s,n({visibleArea:s,type:"move"}))),e.priority==="visible-area"?e.resetCoordinates():e.coordinates=e.fitCoordinates({visibleArea:e.visibleArea,coordinates:e.coordinates,aspectRatio:e.getAspectRatio(),positionRestrictions:e.positionRestrictions,sizeRestrictions:e.sizeRestrictions}),e.runAutoZoom("resetVisibleArea")}).catch(function(){e.visibleArea=null})},updateVisibleArea:function(){var e=this;return this.updateBoundaries().then(function(){e.visibleArea=e.fitVisibleArea({imageSize:e.imageSize,boundaries:e.boundaries,visibleArea:e.visibleArea,coordinates:e.coordinates,getAreaRestrictions:e.getAreaRestrictions}),e.coordinates=e.fitCoordinates({visibleArea:e.visibleArea,coordinates:e.coordinates,aspectRatio:e.getAspectRatio(),positionRestrictions:e.positionRestrictions,sizeRestrictions:e.sizeRestrictions}),e.runAutoZoom("updateVisibleArea")}).catch(function(){e.visibleArea=null})},onChange:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];e&&this.debounce?this.debouncedUpdate():this.update()},onChangeImage:function(){var e,t=this;if(this.imageLoaded=!1,this.delayedTransforms=null,this.src){if(function(n){if(Qe(n))return!1;var s=window.location,l=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(n)||[],a={protocol:l[1]||"",host:l[2]||"",port:l[3]||""},r=function(d){return d.port||((d.protocol||s.protocol)==="http"?80:433)};return!(!a.protocol&&!a.host&&!a.port||a.protocol&&a.protocol==s.protocol&&a.host&&a.host==s.host&&a.host&&r(a)==r(s))}(this.src)){var i=I(this.crossOrigin)?this.canvas:this.crossOrigin;i===!0&&(i="anonymous"),this.imageAttributes.crossOrigin=i||null}if(this.checkOrientation){var o=(e=this.src,new Promise(function(n){Si(e).then(function(s){var l=Ei(s);n(s?{source:e,arrayBuffer:s,orientation:l}:{source:e,arrayBuffer:null,orientation:null})}).catch(function(s){console.warn(s),n({source:e,arrayBuffer:null,orientation:null})})}));setTimeout(function(){o.then(t.onParseImage)},this.transitionTime)}else setTimeout(function(){t.onParseImage({source:t.src})},this.transitionTime)}else this.clearImage()},onFailLoadImage:function(){this.imageAttributes.src&&(this.clearImage(),this.$emit("error"))},onSuccessLoadImage:function(){var e=this,t=this.$refs.image;t&&!this.imageLoaded&&(this.imageAttributes.height=t.naturalHeight,this.imageAttributes.width=t.naturalWidth,this.imageLoaded=!0,this.resetVisibleArea().then(function(){e.$emit("ready"),e.onChange(!1)}))},onParseImage:function(e){var t=this,i=e.source,o=e.arrayBuffer,n=e.orientation;this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.imageAttributes.revoke=!1,o&&n&&n>1?ct(i)||!Qe(i)?(this.imageAttributes.src=URL.createObjectURL(new Blob([o])),this.imageAttributes.revoke=!0):this.imageAttributes.src=function(s){for(var l=[],a=new Uint8Array(s);a.length>0;){var r=a.subarray(0,8192);l.push(String.fromCharCode.apply(null,Array.from?Array.from(r):r.slice())),a=a.subarray(8192)}return"data:image/jpeg;base64,"+btoa(l.join(""))}(o):this.imageAttributes.src=i,ae(this.defaultTransforms)?this.appliedImageTransforms=We(this.defaultTransforms()):xe(this.defaultTransforms)?this.appliedImageTransforms=We(this.defaultTransforms):this.appliedImageTransforms=function(s){var l=We({});if(s)switch(s){case 2:l.flip.horizontal=!0;break;case 3:l.rotate=-180;break;case 4:l.flip.vertical=!0;break;case 5:l.rotate=90,l.flip.vertical=!0;break;case 6:l.rotate=90;break;case 7:l.rotate=90,l.flip.horizontal=!0;break;case 8:l.rotate=-90}return l}(n),this.defaultImageTransforms=z(z({},this.appliedImageTransforms),{},{flip:z({},this.appliedImageTransforms.flip)}),this.$nextTick(function(){var s=t.$refs.image;s&&s.complete&&(function(l){return!!l.naturalWidth}(s)?t.onSuccessLoadImage():t.onFailLoadImage())})},onResizeEnd:function(){this.runAutoZoom("resize",{transitions:!0})},onMoveEnd:function(){this.runAutoZoom("move",{transitions:!0})},onMove:function(e){var t=this;this.transitionsOptions.enabled||this.awaitRender(function(){t.coordinates=t.moveAlgorithm(z(z({},t.getPublicProperties()),{},{positionRestrictions:ye(t.positionRestrictions,t.visibleArea),coordinates:t.coordinates,event:t.normalizeEvent(e)})),t.onChange()})},onResize:function(e){var t=this;this.transitionsOptions.enabled||this.stencilSize&&!this.autoZoom||this.awaitRender(function(){var i=t.sizeRestrictions,o=Math.min(t.coordinates.width,t.coordinates.height,20*t.coefficient);t.coordinates=t.resizeAlgorithm(z(z({},t.getPublicProperties()),{},{positionRestrictions:ye(t.positionRestrictions,t.visibleArea),sizeRestrictions:{maxWidth:Math.min(i.maxWidth,t.visibleArea.width),maxHeight:Math.min(i.maxHeight,t.visibleArea.height),minWidth:Math.max(i.minWidth,o),minHeight:Math.max(i.minHeight,o)},event:t.normalizeEvent(e)})),t.onChange(),t.ticking=!1})},onManipulateImage:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.transitionsOptions.enabled){var i=t.transitions,o=i!==void 0&&i,n=t.normalize,s=n===void 0||n;o&&this.enableTransitions();var l=vi(z(z({},this.getPublicProperties()),{},{event:s?this.normalizeEvent(e):e,getAreaRestrictions:this.getAreaRestrictions,imageRestriction:this.imageRestriction,adjustStencil:!this.stencilSize&&this.settings.resizeImage.adjustStencil})),a=l.visibleArea,r=l.coordinates;this.visibleArea=a,this.coordinates=r,this.runAutoZoom("manipulateImage"),this.onChange(),o&&this.debouncedDisableTransitions()}},onPropsChange:function(){this.coordinates=this.applyTransform(this.coordinates,!0),this.onChange(!1)},getAreaRestrictions:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.visibleArea,i=e.type,o=i===void 0?"move":i;return this.areaRestrictionsAlgorithm({boundaries:this.boundaries,imageSize:this.imageSize,imageRestriction:this.imageRestriction,visibleArea:t,type:o})},getAspectRatio:function(e){var t,i,o=this.stencilProps,n=o.aspectRatio,s=o.minAspectRatio,l=o.maxAspectRatio;if(this.$refs.stencil&&this.$refs.stencil.aspectRatios){var a=this.$refs.stencil.aspectRatios();t=a.minimum,i=a.maximum}if(I(t)&&(t=I(n)?s:n),I(i)&&(i=I(n)?l:n),!e&&(I(t)||I(i))){var r=this.getStencilSize(),d=r?x(r):null;I(t)&&(t=Ke(d)?d:void 0),I(i)&&(i=Ke(d)?d:void 0)}return{minimum:t,maximum:i}},getStencilSize:function(){if(this.stencilSize)return e={currentStencilSize:{width:this.stencilCoordinates.width,height:this.stencilCoordinates.height},stencilSize:this.stencilSize,boundaries:this.boundaries,coefficient:this.coefficient,coordinates:this.coordinates,aspectRatio:this.getAspectRatio(!0)},t=e.boundaries,i=e.stencilSize,o=e.aspectRatio,Ie(x(n=ae(i)?i({boundaries:t,aspectRatio:o}):i),o)&&(n=K({sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minWidth:0,minHeight:0},width:n.width,height:n.height,aspectRatio:{minimum:o.minimum,maximum:o.maximum}})),(n.width>t.width||n.height>t.height)&&(n=K({sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minWidth:0,minHeight:0},width:n.width,height:n.height,aspectRatio:{minimum:x(n),maximum:x(n)}})),n;var e,t,i,o,n},getPublicProperties:function(){return{coefficient:this.coefficient,visibleArea:this.visibleArea,coordinates:this.coordinates,boundaries:this.boundaries,sizeRestrictions:this.sizeRestrictions,positionRestrictions:this.positionRestrictions,aspectRatio:this.getAspectRatio(),imageRestriction:this.imageRestriction}},defaultCoordinates:function(){return z({},_e)},flip:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.transitions,n=o===void 0||o;if(!this.transitionsActive){n&&this.enableTransitions();var s=z({},this.imageTransforms.flip),l=wi({flip:{horizontal:e?!s.horizontal:s.horizontal,vertical:t?!s.vertical:s.vertical},previousFlip:s,rotate:this.imageTransforms.rotate,visibleArea:this.visibleArea,coordinates:this.coordinates,imageSize:this.imageSize,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),a=l.visibleArea,r=l.coordinates;e&&(this.appliedImageTransforms.flip.horizontal=!this.appliedImageTransforms.flip.horizontal),t&&(this.appliedImageTransforms.flip.vertical=!this.appliedImageTransforms.flip.vertical),this.visibleArea=a,this.coordinates=r,this.onChange(),n&&this.debouncedDisableTransitions()}},rotate:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.transitions,o=i===void 0||i;if(!this.transitionsActive){o&&this.enableTransitions();var n=z({},this.imageSize);this.appliedImageTransforms.rotate+=e;var s=bi({visibleArea:this.visibleArea,coordinates:this.coordinates,previousImageSize:n,imageSize:this.imageSize,angle:e,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),l=s.visibleArea,a=s.coordinates,r=this.processAutoZoom("rotateImage",l,a);l=r.visibleArea,a=r.coordinates,this.visibleArea=l,this.coordinates=a,this.onChange(),o&&this.debouncedDisableTransitions()}}},emits:["change","error","ready"]},Pi={key:0,ref:"canvas",style:{display:"none"}},Ti={key:1,ref:"sourceCanvas",style:{display:"none"}};St.render=function(e,t,i,o,n,s){return g(),M("div",{ref:"cropper",class:s.classes.cropper},[L("div",{ref:"stretcher",class:s.classes.stretcher},null,2),L("div",{class:s.classes.boundaries,style:s.boundariesStyle},[(g(),M(Re(i.backgroundWrapperComponent),{class:s.classes.cropperWrapper,"wheel-resize":s.settings.resizeImage.wheel,"touch-resize":s.settings.resizeImage.touch,"touch-move":s.settings.moveImage.touch,"mouse-move":s.settings.moveImage.mouse,onMove:s.onManipulateImage,onResize:s.onManipulateImage},{default:ie(function(){return[L("div",{class:s.classes.background,style:s.boundariesStyle},null,6),L("div",{class:s.classes.imageWrapper},[L("img",{ref:"image",crossorigin:n.imageAttributes.crossOrigin,src:n.imageAttributes.src,class:s.classes.image,style:s.imageStyle,onMousedown:t[1]||(t[1]=ht(function(){},["prevent"]))},null,46,["crossorigin","src"])],2),L("div",{class:s.classes.foreground,style:s.boundariesStyle},null,6),k((g(),M(Re(i.stencilComponent),lt({ref:"stencil",image:s.image,coordinates:n.coordinates,"stencil-coordinates":s.stencilCoordinates,transitions:s.transitionsOptions},i.stencilProps,{onResize:s.onResize,onResizeEnd:s.onResizeEnd,onMove:s.onMove,onMoveEnd:s.onMoveEnd}),null,16,["image","coordinates","stencil-coordinates","transitions","onResize","onResizeEnd","onMove","onMoveEnd"])),[[at,n.imageLoaded]]),i.canvas?(g(),M("canvas",Pi,null,512)):E("",!0),i.canvas?(g(),M("canvas",Ti,null,512)):E("",!0)]}),_:1},8,["class","wheel-resize","touch-resize","touch-move","mouse-move","onMove","onResize"]))],6)],2)};const Ii={components:{AdvancedCropper:St},props:{imageSrc:{type:String,required:!0}},data(){return{zoom:1,coordinates:null,maxZoom:3,minZoom:1}},methods:{handleCropperChange({coordinates:e}){this.coordinates=e},updateZoom:Jt(function(){this.$refs.cropper.zoom(this.zoom)},50),increaseZoom(){this.zoom=Math.min(this.maxZoom,this.zoom+.1),this.updateZoom()},decreaseZoom(){this.zoom=Math.max(this.minZoom,this.zoom-.1),this.updateZoom()},cancel(){this.$emit("cancel")},async save(){try{const{canvas:e}=await this.$refs.cropper.getResult();e.toBlob(t=>{this.$emit("save",t)},"image/jpeg",.9)}catch(e){console.error("Error saving cropped image:",e)}}}},Di={class:"fixed inset-0 bg-black/70 flex items-center justify-center z-50"},Wi={class:"bg-white rounded-lg shadow-xl w-[95%] max-w-2xl overflow-hidden"},Li={class:"p-6"},$i={class:"relative h-[400px] bg-gray-50 rounded-lg"},ji={class:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3"};function Oi(e,t,i,o,n,s){const l=F("AdvancedCropper");return g(),b("div",Di,[h("div",Wi,[t[2]||(t[2]=h("div",{class:"px-6 py-4 border-b border-gray-200"},[h("h3",{class:"text-xl font-semibold text-gray-800"},"Adjust Profile Picture")],-1)),h("div",Li,[h("div",$i,[L(l,{ref:"cropper",src:i.imageSrc,"stencil-props":{aspectRatio:1,handlers:{eastNorth:!0,northEast:!0,westNorth:!0,northWest:!0,westSouth:!0,southWest:!0,eastSouth:!0,southEast:!0},movable:!0,resizable:!0,lines:{},circle:!0},class:"!absolute inset-0","resize-image":{touch:!0,wheel:!0,adjustStencil:!1},transitions:!0,"auto-zoom":!0,"image-restriction":"stencil",onChange:s.handleCropperChange},null,8,["src","onChange"])])]),h("div",ji,[h("button",{onClick:t[0]||(t[0]=(...a)=>s.cancel&&s.cancel(...a)),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors"}," Cancel "),h("button",{onClick:t[1]||(t[1]=(...a)=>s.save&&s.save(...a)),class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors"}," Save Changes ")])])])}const Hi=dt(Ii,[["render",Oi]]),nt={fullName:{max:50,message:"Full name must be less than 50 characters"},addressLine1:{max:100,message:"Address line 1 must be less than 100 characters"},addressLine2:{max:100,message:"Address line 2 must be less than 100 characters"},city:{max:50,message:"City must be less than 50 characters"},state:{max:50,message:"State must be less than 50 characters"},postalCode:{max:10,pattern:/^[A-Z0-9\- ]+$/,message:"Postal code must be alphanumeric and less than 10 characters"},country:{max:50,message:"Country must be less than 50 characters"},email:{max:100,pattern:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address"},phoneNumber:{max:15,pattern:/^[0-9]{6,15}$/,message:"Phone number must be 6-15 digits"}},rt=()=>({fullName:"",addressLine1:"",addressLine2:"",city:"",state:"",postalCode:"",country:"",countryCode:"US",email:"",phoneNumber:"",isDefault:!1}),Bi=Gt({name:"UserProfile",components:{ImageCropperModal:Hi},setup(){const e=Qt(),t=C(null),i=C(!0),o=C(null),n=C(!1),s=C(null),l=C(null),a=C(!1),r=C(""),d=C(""),u=C(""),c=C(""),m=C(""),p=C(""),y=C(!1),A=C(!1),$=C(!1),B=C(!1),Y=C([]),V=C(!1),N=C(null),ue=C(null),Ve=C([]),pe=C(rt()),Ee=C({}),Ze=C([{name:"United States",code:"US",phone:"+1"},{name:"United Kingdom",code:"GB",phone:"+44"},{name:"Canada",code:"CA",phone:"+1"},{name:"Australia",code:"AU",phone:"+61"},{name:"Germany",code:"DE",phone:"+49"},{name:"France",code:"FR",phone:"+33"},{name:"Japan",code:"JP",phone:"+81"},{name:"India",code:"IN",phone:"+91"},{name:"China",code:"CN",phone:"+86"},{name:"Brazil",code:"BR",phone:"+55"}]),Et=ve(()=>{var f;return((f=e.user)==null?void 0:f.profilePicUrl)&&!e.user.profilePicUrl.includes("generated-avatar")}),kt=ve(()=>Y.value.length>=5),Pt=ve({get:()=>{var f;return((f=e.user)==null?void 0:f.username)||""},set:f=>{e.user&&(e.user.username=f)}}),Tt=ve({get:()=>{var f;return((f=e.user)==null?void 0:f.email)||""},set:f=>{e.user&&(e.user.email=f)}}),T=(f,w="success")=>{r.value=f,a.value=!0,setTimeout(()=>{a.value=!1},3e3)},It=async()=>{try{const f={username:e.user.username,email:e.user.email};await e.updateProfile(f),T("Profile information updated successfully"),await e.fetchUserData()}catch(f){console.error("Error updating profile:",f),T(f.message||"Failed to update profile information","error")}},Dt=f=>{const w=f.target.files[0];if(!w)return;if(!w.type.startsWith("image/")){T("Please upload a valid image file","error");return}if(w.size>5*1024*1024){T("File size must be less than 5MB","error");return}const R=new FileReader;R.onload=re=>{s.value=re.target.result,n.value=!0},R.readAsDataURL(w)},Wt=async f=>{try{const w=new FormData,R=new File([f],"avatar.jpg",{type:"image/jpeg"});w.append("image",R);const re=await _.post("/profile/upload",w,{headers:{"Content-Type":"multipart/form-data"}});t.value=`${re.data.profilePicUrl}?t=${Date.now()}`,await e.fetchUserData(),T("Profile picture updated successfully")}catch(w){console.error("Upload error:",w),T("Failed to upload profile picture","error")}finally{n.value=!1,l.value&&(l.value.value="")}},Lt=()=>{n.value=!1,l.value&&(l.value.value="")},$t=async()=>{try{await _.delete("/profile/remove"),await e.fetchUserData(),t.value=e.user.profilePicUrl,T("Profile picture removed successfully")}catch(f){console.error("Remove error:",f),T("Failed to remove profile picture","error")}},ce=async()=>{try{const f=await _.get(`/addresses/user-addresses/${e.user.id}`);Y.value=f.data,Ve.value=JSON.parse(JSON.stringify(Y.value))}catch(f){console.error("Error fetching addresses:",f),T("Failed to load addresses","error")}},jt=(f,w)=>{const R=nt[f];return R&&(R.max&&w.length>R.max||R.pattern&&!R.pattern.test(w))?R.message:!0},qe=f=>{const w={};return Object.keys(nt).forEach(R=>{const re=jt(R,f[R]);re!==!0&&(w[R]=re)}),Object.keys(w).length?w:!0},Ot=()=>{V.value=!V.value,V.value||(pe.value=rt())},Ht=async()=>{const f=qe(pe.value);if(f!==!0){Ee.value=f;return}try{await _.post("/addresses/save-address",{...pe.value,userId:e.user.id}),await ce(),V.value=!1,T("Address added successfully")}catch(w){console.error("Error saving new address:",w),T("Failed to add address","error")}},Bt=f=>{N.value=f.id,ue.value=JSON.parse(JSON.stringify(f))},Nt=()=>{N.value=null,ue.value=null},Ut=async f=>{const w=qe(f);if(w!==!0){Ee.value=w;return}try{await _.put(`/addresses/${f.id}`,f),await ce(),N.value=null,T("Address updated successfully")}catch(R){console.error("Error updating address:",R),T("Failed to update address","error")}},Ft=async f=>{try{await _.put(`/addresses/${f}/set-default`),await ce(),T("Default address updated")}catch(w){console.error("Error setting default address:",w),T("Failed to set default address","error")}},Xt=async f=>{if(confirm("Are you sure you want to delete this address?"))try{await _.delete(`/addresses/${f}`),await ce(),T("Address deleted successfully")}catch(w){console.error("Error deleting address:",w),T("Failed to delete address","error")}},Yt=()=>{if(!ue.value)return!1;const f=Ve.value.find(w=>w.id===N.value);return JSON.stringify(ue.value)!==JSON.stringify(f)},Vt=f=>{const w=Ze.value.find(R=>R.code===f.countryCode);return w?`${w.phone} ${f.phoneNumber}`:f.phoneNumber},Zt=()=>{document.querySelectorAll("textarea").forEach(w=>{const R=()=>{w.style.height="auto",w.style.height=`${w.scrollHeight}px`};R(),w.addEventListener("input",R),w.addEventListener("change",R)})},qt=async()=>{var f,w;if(u.value!==c.value){m.value="New passwords do not match";return}if(u.value.length<8){m.value="Password must be at least 8 characters";return}y.value=!0,m.value="",p.value="";try{await _.post("/auth/change-password",{currentPassword:d.value,newPassword:u.value}),p.value="Password changed successfully",d.value="",u.value="",c.value=""}catch(R){m.value=((w=(f=R.response)==null?void 0:f.data)==null?void 0:w.error)||"Failed to change password"}finally{y.value=!1}};return Kt(async()=>{var f;try{await e.fetchUserData(),t.value=((f=e.user)==null?void 0:f.profilePicUrl)||"",await ce(),Zt()}catch{o.value="Failed to load profile data",T("Failed to load profile data","error")}finally{i.value=!1}}),{profilePicUrl:t,isLoading:i,error:o,showCropper:n,cropperImage:s,showToast:a,toastMessage:r,computedUsername:Pt,computedEmail:Tt,hasCustomAvatar:Et,fileInput:l,currentPassword:d,newPassword:u,confirmPassword:c,passwordError:m,passwordSuccess:p,isChangingPassword:y,showCurrentPassword:A,showNewPassword:$,showConfirmPassword:B,localAddresses:Y,showNewAddressForm:V,editingAddressId:N,editedAddress:ue,newAddress:pe,validationErrors:Ee,countries:Ze,isAddButtonDisabled:kt,handleFileSelect:Dt,handleCroppedImage:Wt,handleCropperCancel:Lt,removeAvatar:$t,saveBasicInfo:It,changePassword:qt,toggleNewAddressForm:Ot,saveNewAddress:Ht,enterEditMode:Bt,cancelEdit:Nt,updateAddress:Ut,setDefault:Ft,deleteAddress:Xt,hasChanges:Yt,getFullPhoneNumber:Vt}}}),Ni={class:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},Ui={class:"max-w-5xl mx-auto"},Fi={key:0,class:"flex justify-center items-center h-64"},Xi={key:1,class:"bg-red-50 border-2 border-red-200 rounded-lg p-6 text-red-700 text-lg"},Yi={key:2,class:"space-y-8"},Vi={class:"bg-white rounded-xl shadow-sm overflow-hidden"},Zi={class:"p-8 border-b border-gray-100 flex flex-col sm:flex-row items-start gap-8"},qi={class:"relative group"},Ji={class:"relative"},Gi=["src"],Qi={class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},Ki={class:"bg-black bg-opacity-50 rounded-full h-40 w-40 flex items-center justify-center"},_i={class:"space-y-2 text-center"},es={class:"flex-1 w-full"},ts={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},is={class:"space-y-4"},ss={class:"space-y-4"},os={class:"flex justify-end pt-4"},ns={class:"p-8 border-t border-gray-100"},rs={class:"space-y-2"},as={class:"relative w-1/2"},ls=["type"],hs={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-400 hover:text-blue-800 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ds={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-400 hover:text-blue-800 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},us={class:"space-y-2"},cs={class:"relative w-1/2"},ms=["type"],gs={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-400 hover:text-blue-800 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ps={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-400 hover:text-blue-800 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},fs={class:"space-y-2"},vs={class:"relative w-1/2"},bs=["type"],ws={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-400 hover:text-blue-800 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ys={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-400 hover:text-blue-800 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},As={key:0,class:"text-red-600 text-sm"},zs={key:1,class:"text-green-600 text-sm"},xs=["disabled"],Rs={class:"p-8 border-t border-gray-100"},Cs={class:"flex justify-between items-center mb-6"},Ms=["disabled"],Ss={key:0,class:"mb-8"},Es={class:"bg-gray-50 rounded-lg p-6 border-2 border-blue-200"},ks={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ps={class:"space-y-4"},Ts={key:0,class:"text-red-500 text-sm mt-1"},Is={key:0,class:"text-red-500 text-sm mt-1"},Ds={key:0,class:"text-red-500 text-sm mt-1"},Ws={class:"space-y-4"},Ls={class:"grid grid-cols-2 gap-4"},$s={key:0,class:"text-red-500 text-sm mt-1"},js={key:0,class:"text-red-500 text-sm mt-1"},Os={class:"grid grid-cols-2 gap-4"},Hs={key:0,class:"text-red-500 text-sm mt-1"},Bs=["value"],Ns={key:0,class:"text-red-500 text-sm mt-1"},Us={class:"flex gap-2"},Fs=["value"],Xs={key:0,class:"text-red-500 text-sm mt-1"},Ys={class:"flex justify-end mt-6 pt-4 border-t border-gray-200"},Vs={class:"space-y-6"},Zs={class:"mb-4 space-y-2"},qs={key:0,class:"bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full inline-block"},Js={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Gs={class:"space-y-4"},Qs=["value","readonly"],Ks=["value","readonly"],_s=["value","readonly"],eo={class:"space-y-4"},to={class:"grid grid-cols-2 gap-4"},io=["value","readonly"],so=["value","readonly"],oo={class:"grid grid-cols-2 gap-4"},no=["value","readonly"],ro=["value"],ao=["value"],lo=["value","readonly"],ho={key:0,class:"flex gap-2"},uo=["value"],co=["value"],mo={class:"flex justify-between mt-6 pt-4 border-t border-gray-200"},go={class:"flex items-center space-x-6"},po=["onClick"],fo=["onClick"],vo=["onClick"],bo=["disabled"];function wo(e,t,i,o,n,s){const l=F("ImageCropperModal");return g(),b("div",Ni,[h("div",Ui,[t[71]||(t[71]=h("h1",{class:"text-4xl font-bold text-gray-900 mb-10"},"My Profile",-1)),e.isLoading?(g(),b("div",Fi,t[38]||(t[38]=[h("div",{class:"animate-spin rounded-full h-16 w-16 border-4 border-primary border-t-transparent"},null,-1)]))):e.error?(g(),b("div",Xi,S(e.error),1)):(g(),b("div",Yi,[h("div",Vi,[h("div",Zi,[h("div",qi,[h("div",Ji,[h("img",{src:e.profilePicUrl,class:"h-40 w-40 rounded-full object-cover ring-4 ring-gray-100",onError:t[0]||(t[0]=(...a)=>e.handleImageError&&e.handleImageError(...a))},null,40,Gi),t[39]||(t[39]=h("div",{class:"absolute bottom-0 right-0 bg-gray-300 rounded-full p-2 shadow-sm"},[h("svg",{class:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})])],-1))]),h("div",Qi,[h("div",Ki,[h("div",_i,[h("button",{onClick:t[1]||(t[1]=a=>{var r;return(r=e.fileInput)==null?void 0:r.click()}),class:"text-sm text-white hover:text-gray-200 transition-colors mb-2"},S(e.hasCustomAvatar?"Change Photo":"Add Photo"),1),e.hasCustomAvatar?(g(),b("button",{key:0,onClick:t[2]||(t[2]=(...a)=>e.removeAvatar&&e.removeAvatar(...a)),class:"text-sm text-red-300 hover:text-red-200 transition-colors"}," Remove ")):E("",!0)])])]),h("input",{type:"file",ref:"fileInput",onChange:t[3]||(t[3]=(...a)=>e.handleFileSelect&&e.handleFileSelect(...a)),accept:"image/*",class:"hidden"},null,544)]),h("div",es,[h("div",ts,[h("div",is,[h("div",null,[t[40]||(t[40]=h("label",{class:"block text-sm font-medium text-gray-500"},"Username",-1)),k(h("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>e.computedUsername=a),type:"text",class:"mt-1 w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[U,e.computedUsername]])]),h("div",null,[t[41]||(t[41]=h("label",{class:"block text-sm font-medium text-gray-500"},"Email",-1)),k(h("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>e.computedEmail=a),type:"email",class:"mt-1 w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[U,e.computedEmail]])])]),h("div",ss,[h("div",os,[h("button",{onClick:t[6]||(t[6]=(...a)=>e.saveBasicInfo&&e.saveBasicInfo(...a)),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"}," Save Changes ")])])])])]),h("div",ns,[t[51]||(t[51]=h("div",{class:"flex justify-between items-center mb-6"},[h("h3",{class:"text-2xl font-semibold text-gray-900"},"Change Password")],-1)),h("form",{onSubmit:t[13]||(t[13]=ht((...a)=>e.changePassword&&e.changePassword(...a),["prevent"])),class:"space-y-6"},[h("div",rs,[t[44]||(t[44]=h("label",{class:"block text-sm font-medium text-gray-500"},"Current Password",-1)),h("div",as,[k(h("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>e.currentPassword=a),type:e.showCurrentPassword?"text":"password",required:"",class:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-blue-500 focus:border-blue-500 pr-10"},null,8,ls),[[ke,e.currentPassword]]),h("button",{type:"button",onClick:t[8]||(t[8]=a=>e.showCurrentPassword=!e.showCurrentPassword),class:"absolute right-3 top-1/2 -translate-y-1/2 focus:outline-none bg-transparent"},[e.showCurrentPassword?(g(),b("svg",ds,t[43]||(t[43]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)]))):(g(),b("svg",hs,t[42]||(t[42]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])))])])]),h("div",us,[t[47]||(t[47]=h("label",{class:"block text-sm font-medium text-gray-500"},"New Password",-1)),h("div",cs,[k(h("input",{"onUpdate:modelValue":t[9]||(t[9]=a=>e.newPassword=a),type:e.showNewPassword?"text":"password",required:"",class:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-blue-500 focus:border-blue-500 pr-10"},null,8,ms),[[ke,e.newPassword]]),h("button",{type:"button",onClick:t[10]||(t[10]=a=>e.showNewPassword=!e.showNewPassword),class:"absolute right-3 top-1/2 -translate-y-1/2 focus:outline-none bg-transparent"},[e.showNewPassword?(g(),b("svg",ps,t[46]||(t[46]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)]))):(g(),b("svg",gs,t[45]||(t[45]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])))])])]),h("div",fs,[t[50]||(t[50]=h("label",{class:"block text-sm font-medium text-gray-500"},"Confirm New Password",-1)),h("div",vs,[k(h("input",{"onUpdate:modelValue":t[11]||(t[11]=a=>e.confirmPassword=a),type:e.showConfirmPassword?"text":"password",required:"",class:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-blue-500 focus:border-blue-500 pr-10"},null,8,bs),[[ke,e.confirmPassword]]),h("button",{type:"button",onClick:t[12]||(t[12]=a=>e.showConfirmPassword=!e.showConfirmPassword),class:"absolute right-3 top-1/2 -translate-y-1/2 focus:outline-none bg-transparent"},[e.showConfirmPassword?(g(),b("svg",ys,t[49]||(t[49]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)]))):(g(),b("svg",ws,t[48]||(t[48]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])))])])]),e.passwordError?(g(),b("div",As,S(e.passwordError),1)):E("",!0),e.passwordSuccess?(g(),b("div",zs,S(e.passwordSuccess),1)):E("",!0),h("button",{type:"submit",disabled:e.isChangingPassword,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},S(e.isChangingPassword?"Updating...":"Change Password"),9,xs)],32)]),h("div",Rs,[h("div",Cs,[t[52]||(t[52]=h("h3",{class:"text-2xl font-semibold text-gray-900"},"Saved Addresses",-1)),h("button",{onClick:t[14]||(t[14]=(...a)=>e.toggleNewAddressForm&&e.toggleNewAddressForm(...a)),disabled:e.isAddButtonDisabled,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400"},S(e.showNewAddressForm?"Cancel":"Add New Address"),9,Ms)]),e.showNewAddressForm?(g(),b("div",Ss,[h("div",Es,[h("div",ks,[h("div",Ps,[h("div",null,[t[53]||(t[53]=h("label",{class:"block text-sm font-medium text-gray-500"},"Full Name",-1)),k(h("input",{"onUpdate:modelValue":t[15]||(t[15]=a=>e.newAddress.fullName=a),type:"text",maxlength:"50",class:"mt-1 w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[U,e.newAddress.fullName]]),e.validationErrors.fullName?(g(),b("p",Ts,S(e.validationErrors.fullName),1)):E("",!0)]),h("div",null,[t[54]||(t[54]=h("label",{class:"block text-sm font-medium text-gray-500"},"Address Line 1",-1)),k(h("textarea",{"onUpdate:modelValue":t[16]||(t[16]=a=>e.newAddress.addressLine1=a),maxlength:"100",class:"mt-1 w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-blue-500 focus:border-blue-500",ref:"autoResizeTextarea"},null,512),[[U,e.newAddress.addressLine1]]),e.validationErrors.addressLine1?(g(),b("p",Is,S(e.validationErrors.addressLine1),1)):E("",!0)]),h("div",null,[t[55]||(t[55]=h("label",{class:"block text-sm font-medium text-gray-500"},"Address Line 2",-1)),k(h("textarea",{"onUpdate:modelValue":t[17]||(t[17]=a=>e.newAddress.addressLine2=a),maxlength:"100",class:"mt-1 w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-blue-500 focus:border-blue-500",ref:"autoResizeTextarea"},null,512),[[U,e.newAddress.addressLine2]]),e.validationErrors.addressLine2?(g(),b("p",Ds,S(e.validationErrors.addressLine2),1)):E("",!0)])]),h("div",Ws,[h("div",Ls,[h("div",null,[t[56]||(t[56]=h("label",{class:"block text-sm font-medium text-gray-500"},"City",-1)),k(h("input",{"onUpdate:modelValue":t[18]||(t[18]=a=>e.newAddress.city=a),type:"text",maxlength:"50",class:"mt-1 w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[U,e.newAddress.city]]),e.validationErrors.city?(g(),b("p",$s,S(e.validationErrors.city),1)):E("",!0)]),h("div",null,[t[57]||(t[57]=h("label",{class:"block text-sm font-medium text-gray-500"},"State",-1)),k(h("input",{"onUpdate:modelValue":t[19]||(t[19]=a=>e.newAddress.state=a),type:"text",maxlength:"50",class:"mt-1 w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[U,e.newAddress.state]]),e.validationErrors.state?(g(),b("p",js,S(e.validationErrors.state),1)):E("",!0)])]),h("div",Os,[h("div",null,[t[58]||(t[58]=h("label",{class:"block text-sm font-medium text-gray-500"},"Postal Code",-1)),k(h("input",{"onUpdate:modelValue":t[20]||(t[20]=a=>e.newAddress.postalCode=a),type:"text",maxlength:"10",class:"mt-1 w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[U,e.newAddress.postalCode]]),e.validationErrors.postalCode?(g(),b("p",Hs,S(e.validationErrors.postalCode),1)):E("",!0)]),h("div",null,[t[59]||(t[59]=h("label",{class:"block text-sm font-medium text-gray-500"},"Country",-1)),k(h("select",{"onUpdate:modelValue":t[21]||(t[21]=a=>e.newAddress.country=a),class:"mt-1 w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-blue-500 focus:border-blue-500"},[(g(!0),b(ee,null,se(e.countries,a=>(g(),b("option",{key:a.code,value:a.name},S(a.name),9,Bs))),128))],512),[[fe,e.newAddress.country]])])]),h("div",null,[t[60]||(t[60]=h("label",{class:"block text-sm font-medium text-gray-500"},"Contact Email",-1)),k(h("input",{"onUpdate:modelValue":t[22]||(t[22]=a=>e.newAddress.email=a),type:"email",maxlength:"100",class:"mt-1 w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[U,e.newAddress.email]]),e.validationErrors.email?(g(),b("p",Ns,S(e.validationErrors.email),1)):E("",!0)]),h("div",null,[t[61]||(t[61]=h("label",{class:"block text-sm font-medium text-gray-500"},"Contact Phone",-1)),h("div",Us,[k(h("select",{"onUpdate:modelValue":t[23]||(t[23]=a=>e.newAddress.countryCode=a),class:"min-w-[120px] pl-2 pr-8 py-2 border-2 border-gray-200 rounded-lg"},[(g(!0),b(ee,null,se(e.countries,a=>(g(),b("option",{key:a.code,value:a.code}," +"+S(a.phone.replace("+",""))+" ("+S(a.code)+") ",9,Fs))),128))],512),[[fe,e.newAddress.countryCode]]),k(h("input",{"onUpdate:modelValue":t[24]||(t[24]=a=>e.newAddress.phoneNumber=a),type:"tel",maxlength:"15",class:"mt-1 w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[U,e.newAddress.phoneNumber]])]),e.validationErrors.phoneNumber?(g(),b("p",Xs,S(e.validationErrors.phoneNumber),1)):E("",!0)])])]),h("div",Ys,[h("button",{onClick:t[25]||(t[25]=(...a)=>e.saveNewAddress&&e.saveNewAddress(...a)),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"}," Save Address ")])])])):E("",!0),h("div",Vs,[(g(!0),b(ee,null,se(e.localAddresses,a=>(g(),b("div",{key:a.id,class:G(["bg-gray-50 rounded-lg p-6 border-2",a.isDefault?"border-blue-200 bg-blue-50":"border-gray-200"])},[h("div",Zs,[a.isDefault?(g(),b("span",qs," Default Address ")):E("",!0)]),h("div",Js,[h("div",Gs,[h("div",null,[t[62]||(t[62]=h("label",{class:"block text-sm font-medium text-gray-500"},"Full Name",-1)),h("input",{value:e.editingAddressId===a.id?e.editedAddress.fullName:a.fullName,onInput:t[26]||(t[26]=r=>e.editedAddress.fullName=r.target.value),readonly:e.editingAddressId!==a.id,class:G([{"bg-gray-100":e.editingAddressId!==a.id},"mt-1 w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-blue-500 focus:border-blue-500"]),maxlength:"50",type:"text"},null,42,Qs)]),h("div",null,[t[63]||(t[63]=h("label",{class:"block text-sm font-medium text-gray-500"},"Address Line 1",-1)),h("textarea",{value:e.editingAddressId===a.id?e.editedAddress.addressLine1:a.addressLine1,onInput:t[27]||(t[27]=r=>e.editedAddress.addressLine1=r.target.value),readonly:e.editingAddressId!==a.id,class:G([{"bg-gray-100":e.editingAddressId!==a.id},"mt-1 w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-blue-500 focus:border-blue-500"]),ref_for:!0,ref:"autoResizeTextarea"},null,42,Ks)]),h("div",null,[t[64]||(t[64]=h("label",{class:"block text-sm font-medium text-gray-500"},"Address Line 2",-1)),h("textarea",{value:e.editingAddressId===a.id?e.editedAddress.addressLine2:a.addressLine2,onInput:t[28]||(t[28]=r=>e.editedAddress.addressLine2=r.target.value),readonly:e.editingAddressId!==a.id,class:G([{"bg-gray-100":e.editingAddressId!==a.id},"mt-1 w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-blue-500 focus:border-blue-500"]),ref_for:!0,ref:"autoResizeTextarea"},null,42,_s)])]),h("div",eo,[h("div",to,[h("div",null,[t[65]||(t[65]=h("label",{class:"block text-sm font-medium text-gray-500"},"City",-1)),h("input",{value:e.editingAddressId===a.id?e.editedAddress.city:a.city,onInput:t[29]||(t[29]=r=>e.editedAddress.city=r.target.value),readonly:e.editingAddressId!==a.id,class:G([{"bg-gray-100":e.editingAddressId!==a.id},"mt-1 w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-blue-500 focus:border-blue-500"]),type:"text"},null,42,io)]),h("div",null,[t[66]||(t[66]=h("label",{class:"block text-sm font-medium text-gray-500"},"State",-1)),h("input",{value:e.editingAddressId===a.id?e.editedAddress.state:a.state,onInput:t[30]||(t[30]=r=>e.editedAddress.state=r.target.value),readonly:e.editingAddressId!==a.id,class:G([{"bg-gray-100":e.editingAddressId!==a.id},"mt-1 w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-blue-500 focus:border-blue-500"]),type:"text"},null,42,so)])]),h("div",oo,[h("div",null,[t[67]||(t[67]=h("label",{class:"block text-sm font-medium text-gray-500"},"Postal Code",-1)),h("input",{value:e.editingAddressId===a.id?e.editedAddress.postalCode:a.postalCode,onInput:t[31]||(t[31]=r=>e.editedAddress.postalCode=r.target.value),readonly:e.editingAddressId!==a.id,class:G([{"bg-gray-100":e.editingAddressId!==a.id},"mt-1 w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-blue-500 focus:border-blue-500"]),type:"text"},null,42,no)]),h("div",null,[t[68]||(t[68]=h("label",{class:"block text-sm font-medium text-gray-500"},"Country",-1)),e.editingAddressId===a.id?k((g(),b("select",{key:0,"onUpdate:modelValue":t[32]||(t[32]=r=>e.editedAddress.country=r),class:"mt-1 w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-blue-500 focus:border-blue-500"},[(g(!0),b(ee,null,se(e.countries,r=>(g(),b("option",{key:r.code,value:r.name},S(r.name),9,ro))),128))],512)),[[fe,e.editedAddress.country]]):(g(),b("input",{key:1,value:a.country,readonly:"",class:"mt-1 w-full px-4 py-2 border-2 border-gray-200 rounded-lg bg-gray-100",type:"text"},null,8,ao))])]),h("div",null,[t[69]||(t[69]=h("label",{class:"block text-sm font-medium text-gray-500"},"Contact Email",-1)),h("input",{value:e.editingAddressId===a.id?e.editedAddress.email:a.email,onInput:t[33]||(t[33]=r=>e.editedAddress.email=r.target.value),readonly:e.editingAddressId!==a.id,class:G([{"bg-gray-100":e.editingAddressId!==a.id},"mt-1 w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-blue-500 focus:border-blue-500"]),type:"email"},null,42,lo)]),h("div",null,[t[70]||(t[70]=h("label",{class:"block text-sm font-medium text-gray-500"},"Contact Phone",-1)),e.editingAddressId===a.id?(g(),b("div",ho,[k(h("select",{"onUpdate:modelValue":t[34]||(t[34]=r=>e.editedAddress.countryCode=r),class:"min-w-[120px] pl-2 pr-8 py-2 border-2 border-gray-200 rounded-lg"},[(g(!0),b(ee,null,se(e.countries,r=>(g(),b("option",{key:r.code,value:r.code}," +"+S(r.phone.replace("+",""))+" ("+S(r.code)+") ",9,uo))),128))],512),[[fe,e.editedAddress.countryCode]]),k(h("input",{"onUpdate:modelValue":t[35]||(t[35]=r=>e.editedAddress.phoneNumber=r),type:"tel",maxlength:"15",class:"mt-1 w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[U,e.editedAddress.phoneNumber]])])):(g(),b("input",{key:1,value:e.getFullPhoneNumber(a),readonly:"",class:"mt-1 w-full px-4 py-2 border-2 border-gray-200 rounded-lg bg-gray-100",type:"text"},null,8,co))])])]),h("div",mo,[h("div",go,[e.editingAddressId!==a.id?(g(),b("button",{key:0,onClick:r=>e.deleteAddress(a.id),class:"text-red-600 hover:text-red-700 transition-colors"}," Delete ",8,po)):E("",!0),!a.isDefault&&e.editingAddressId!==a.id?(g(),b("button",{key:1,onClick:r=>e.setDefault(a.id),class:"text-blue-600 hover:text-blue-700 transition-colors"}," Set as Default ",8,fo)):E("",!0),e.editingAddressId!==a.id?(g(),b("button",{key:2,onClick:r=>e.enterEditMode(a),class:"text-gray-600 hover:text-gray-700 transition-colors"}," Edit ",8,vo)):E("",!0),e.editingAddressId===a.id?(g(),b(ee,{key:3},[h("button",{onClick:t[36]||(t[36]=(...r)=>e.cancelEdit&&e.cancelEdit(...r)),class:"text-gray-600 hover:text-gray-700 transition-colors mr-4"}," Cancel "),h("button",{onClick:t[37]||(t[37]=r=>e.updateAddress(e.editedAddress)),disabled:!e.hasChanges(),class:"text-green-600 hover:text-green-700 transition-colors disabled:opacity-50"}," Save ",8,bo)],64)):E("",!0)])])],2))),128))])])])]))]),e.showToast?(g(),b("div",{key:0,class:G(["fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg transition-opacity duration-300",{"opacity-0":!e.showToast}])},S(e.toastMessage),3)):E("",!0),e.showCropper?(g(),M(l,{key:1,"image-src":e.cropperImage,onCancel:e.handleCropperCancel,onSave:e.handleCroppedImage},null,8,["image-src","onCancel","onSave"])):E("",!0)])}const Ao=dt(Bi,[["render",wo],["__scopeId","data-v-eeb28e06"]]);export{Ao as default};
