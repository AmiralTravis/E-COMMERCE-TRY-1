import{_ as k,d as q,c as m,a as d,t,b as U,F as w,r as P,w as a,v as n,e as S,u as $,f as u,o as M,g as p,h as y}from"./index-BTzv2b8q.js";const B=q({name:"UserProfile",setup(){var L,C,A;const r=$(),e=u([]),v=u(((L=r.user)==null?void 0:L.username)||""),b=u(((C=r.user)==null?void 0:C.email)||""),N=u(((A=r.user)==null?void 0:A.phoneNumber)||""),f=u(!1),s=u({id:null,fullName:"",addressLine1:"",addressLine2:"",city:"",state:"",postalCode:"",country:"",email:"",phoneNumber:""}),i=async()=>{try{const o=await y.get(`/addresses/user-addresses/${r.user.id}`);e.value=o.data}catch(o){console.error("Error fetching addresses:",o)}},E=async o=>{try{const l=e.value.find(g=>g.id===o);await y.post("/addresses/save-address",{userId:r.user.id,isDefault:!0,id:o,fullName:l.fullName,email:l.email,phoneNumber:l.phoneNumber,addressLine1:l.addressLine1,addressLine2:l.addressLine2,city:l.city,state:l.state,postalCode:l.postalCode,country:l.country}),await i()}catch(l){console.error("Error setting default address:",l)}},D=o=>{s.value={...o},f.value=!0},V=async()=>{try{await y.post("/addresses/save-address",{userId:r.user.id,id:s.value.id,fullName:s.value.fullName,email:s.value.email,phoneNumber:s.value.phoneNumber,addressLine1:s.value.addressLine1,addressLine2:s.value.addressLine2,city:s.value.city,state:s.value.state,postalCode:s.value.postalCode,country:s.value.country,isDefault:s.value.isDefault||!1}),await i(),F()}catch(o){console.error("Error updating address:",o)}},F=()=>{f.value=!1,s.value={id:null,fullName:"",addressLine1:"",addressLine2:"",city:"",state:"",postalCode:"",country:"",email:"",phoneNumber:""}};return M(i),{username:v,email:b,phoneNumber:N,addresses:e,editingAddress:f,addressForm:s,setDefaultAddress:E,editAddress:D,updateAddress:V,cancelEdit:F}}}),I={class:"profile-container"},T={class:"profile-content"},j={class:"profile-info"},z={class:"saved-addresses"},G={key:0},H=["onClick","disabled"],J=["onClick"],K={key:0,class:"edit-address-form"};function O(r,e,v,b,N,f){return p(),m("div",I,[e[24]||(e[24]=d("h1",null,"My Profile",-1)),d("div",T,[d("div",j,[e[11]||(e[11]=d("h2",null,"Personal Information",-1)),d("p",null,"Username: "+t(r.username),1),d("p",null,"Email: "+t(r.email),1),d("p",null,"Phone Number: "+t(r.phoneNumber),1)]),d("div",z,[e[12]||(e[12]=d("h2",null,"Saved Addresses",-1)),r.addresses.length===0?(p(),m("div",G," No saved addresses ")):U("",!0),(p(!0),m(w,null,P(r.addresses,s=>(p(),m("div",{key:s.id,class:"address-card"},[d("p",null,t(s.fullName),1),d("p",null,t(s.addressLine1),1),d("p",null,t(s.city)+", "+t(s.postalCode),1),d("p",null,t(s.state)+" - "+t(s.country),1),d("p",null,"Email: "+t(s.email),1),d("p",null,"Phone: "+t(s.phoneNumber),1),d("button",{onClick:i=>r.setDefaultAddress(s.id),disabled:s.isDefault},t(s.isDefault?"Default Address":"Set as Default"),9,H),d("button",{onClick:i=>r.editAddress(s)}," Edit Address ",8,J)]))),128))])]),r.editingAddress?(p(),m("div",K,[e[23]||(e[23]=d("h3",null,"Edit Address",-1)),d("form",{onSubmit:e[10]||(e[10]=S((...s)=>r.updateAddress&&r.updateAddress(...s),["prevent"]))},[e[13]||(e[13]=d("label",{for:"fullName"},"Full Name:",-1)),a(d("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>r.addressForm.fullName=s),required:""},null,512),[[n,r.addressForm.fullName]]),e[14]||(e[14]=d("label",{for:"addressLine1"},"Address Line 1:",-1)),a(d("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>r.addressForm.addressLine1=s),required:""},null,512),[[n,r.addressForm.addressLine1]]),e[15]||(e[15]=d("label",{for:"addressLine2"},"Address Line 2:",-1)),a(d("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=s=>r.addressForm.addressLine2=s)},null,512),[[n,r.addressForm.addressLine2]]),e[16]||(e[16]=d("label",{for:"city"},"City:",-1)),a(d("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=s=>r.addressForm.city=s),required:""},null,512),[[n,r.addressForm.city]]),e[17]||(e[17]=d("label",{for:"state"},"State:",-1)),a(d("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=s=>r.addressForm.state=s),required:""},null,512),[[n,r.addressForm.state]]),e[18]||(e[18]=d("label",{for:"postalCode"},"Postal Code:",-1)),a(d("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=s=>r.addressForm.postalCode=s),required:""},null,512),[[n,r.addressForm.postalCode]]),e[19]||(e[19]=d("label",{for:"country"},"Country:",-1)),a(d("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=s=>r.addressForm.country=s),required:""},null,512),[[n,r.addressForm.country]]),e[20]||(e[20]=d("label",{for:"email"},"Email:",-1)),a(d("input",{type:"email","onUpdate:modelValue":e[7]||(e[7]=s=>r.addressForm.email=s),required:""},null,512),[[n,r.addressForm.email]]),e[21]||(e[21]=d("label",{for:"phoneNumber"},"Phone Number:",-1)),a(d("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=s=>r.addressForm.phoneNumber=s),required:""},null,512),[[n,r.addressForm.phoneNumber]]),e[22]||(e[22]=d("button",{type:"submit"},"Update Address",-1)),d("button",{type:"button",onClick:e[9]||(e[9]=(...s)=>r.cancelEdit&&r.cancelEdit(...s))},"Cancel")],32)])):U("",!0)])}const R=k(B,[["render",O],["__scopeId","data-v-2abf1c84"]]);export{R as default};
